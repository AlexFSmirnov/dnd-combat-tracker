(this["webpackJsonpdnd-combat-tracker"]=this["webpackJsonpdnd-combat-tracker"]||[]).push([[0],{104:function(e,t,n){e.exports=n(138)},109:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),i=n.n(c),o=(n(109),n(93)),u=n(171),l=n(14),s=n(80),d=n(26),m=n(81),f=n(58),h=n(82),b=n.n(h),p=n(83),v=n.n(p),y=n(8),E=n(17),g=n(57),O=n.n(g),C=n(85),j=n(86),x=n.n(j),w=function(){var e=Object(C.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.characterId,r="https://www.dndbeyond.com/character/".concat(n,"/json"),e.next=4,x()({method:"GET",url:r,withCredentials:!1});case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(164),T=function(e){if(e.response)switch(e.response.status){case 404:return a.a.createElement(a.a.Fragment,null,'Invalid character URL, page not found. Make sure that the ID is correct and that character privacy is set to "Public".',a.a.createElement("br",null),a.a.createElement("br",null),"Error message: ",e.message);case 403:return a.a.createElement(a.a.Fragment,null,"D&D Beyond blocked a request because it thinks I'm a robot. Opening ",a.a.createElement(k.a,{href:"https://www.dndbeyond.com/"},"dndbeyond.com")," in Incognito mode and passing the captcha there usually helps.",a.a.createElement("br",null),a.a.createElement("br",null),"Error message: ",e.message)}return a.a.createElement(a.a.Fragment,null,"Request was unsuccessful. Most likely your browser is blocking Cross-Origin requests (CORS). Make sure you have a CORS-allowing extension installed or disable D&D Beyond integration in settings.",a.a.createElement("br",null),a.a.createElement("br",null),"Error message: ",e.message)},I=function(e){return{type:"ERROR_DIALOG_OPENED",payload:e}},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:"ENC_CUSTOM_CHARACTER_HIT_POINTS_UPDATED",payload:{key:e,update:t,temp:n}}},D=function(e,t){return function(n,r){var a=e.split("/")[e.split("/").length-1],c=r().beyondCharacters;c&&c.every((function(e){return e.id.toString()!==a}))?w({characterId:a}).then((function(e){var r=e.id,a=e.name,c=e.removedHitPoints,i=e.temporaryHitPoints,o=e.deathSaves,u=e.avatarUrl,l=e.themeColor,s=e.defaultBackdrop;n(R({id:r,name:a,maxHitPoints:t,removedHitPoints:c,temporaryHitPoints:i,deathSaves:o,avatarUrl:u,themeColor:l,defaultBackdrop:s}))}),(function(e){return n(I(T(e)))})):n(N(parseInt(a),t))}},N=function(e,t){return function(n,r){var a=r().beyondCharacters;a&&(a.find((function(t){return t.id===e}))?w({characterId:e.toString()}).then((function(e){var r=e.id,a=e.name,c=e.removedHitPoints,i=e.temporaryHitPoints,o=e.deathSaves,u=e.avatarUrl,l=e.themeColor,s=e.defaultBackdrop,d={id:r,name:a,maxHitPoints:t,removedHitPoints:c,temporaryHitPoints:i,deathSaves:o,avatarUrl:u,themeColor:l,defaultBackdrop:s};n(_(r,d)),n(function(e,t){return{type:"ENC_BEYOND_CHARACTER_UPDATED_BY_ID",payload:{id:e,character:t}}}(r,d))}),(function(e){return n(I(T(e)))})):n(D(e.toString(),t)))}},R=function(e){return{type:"BEYOND_CHARACTER_ADDED",payload:e}},_=function(e,t){return{type:"BEYOND_CHARACTER_UPDATED",payload:{id:e,character:t}}},H=[],S=function(e,t){var n=t.payload,r=n.id,a=n.character,c=e.find((function(e){return e.id===r}));if(c){var i=e.indexOf(c);return[].concat(Object(E.a)(e.slice(0,i)),[a],Object(E.a)(e.slice(i+1)))}return[].concat(Object(E.a)(e),[a])},B=function(e,t){var n=t.payload,r=n.id,a=n.maxHp,c=e.find((function(e){return e.id===r}));if(c){var i=e.indexOf(c);return[].concat(Object(E.a)(e.slice(0,i)),[Object(y.a)({},c,{maxHitPoints:a})],Object(E.a)(e.slice(i+1)))}return Object(E.a)(e)},P=function(e,t){var n=t.payload.id,r=e.find((function(e){return e.id===n}));if(r){var a=e.indexOf(r);return[].concat(Object(E.a)(e.slice(0,a)),Object(E.a)(e.slice(a+1)))}return Object(E.a)(e)},M=function(e){return{type:"CUSTOM_CHARACTER_ADDED",payload:e}},U=function(e){return{type:"CUSTOM_CHARACTER_UPDATED",payload:e}},K=[],L=function(e,t){var n=t.payload,r=e.indexOf(n);return-1!==r?[].concat(Object(E.a)(e.slice(0,r)),Object(E.a)(e.slice(r+1))):Object(E.a)(e)},F=function(e,t){var n=t.payload,r=n.originalCharacter,a=n.updatedCharacter,c=e.indexOf(r);return-1!==c?[].concat(Object(E.a)(e.slice(0,c)),[a],Object(E.a)(e.slice(c+1))):Object(E.a)(e)},z={errorDialog:{isOpen:!1}},Y=n(11),V=n(12),W=n(9),Z=n(27),q=n(169),G=n(94),X=n(194),J=n(170),$=n(198),Q=n(6),ee=Object(Q.a)((function(e){return{tooltip:{fontSize:16,backgroundColor:e.palette.secondary.main},arrow:{color:e.palette.secondary.main}}}))((function(e){return a.a.createElement($.a,Object.assign({arrow:!0},e))})),te=n(3),ne=n(4);function re(){var e=Object(te.a)(["\n    position: absolute;\n    border: 2px solid white;\n    border-radius: 50%;\n\n    ","\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n\n    color: white;\n    background-color: ",";\n\n    transform: scale(0.01);\n    transition: transform 100ms;\n"]);return re=function(){return e},e}function ae(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: 2px solid ",";\n    border-radius: 8px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n\n    font-size: ","px;\n    line-height: ","px;\n\n    color: ",";\n    background-color: ",";\n\n    transition: 100ms;\n    cursor: pointer;\n"]);return ae=function(){return e},e}function ce(){var e=Object(te.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n    min-width: ","px;\n    min-height: ","px;\n    margin-right: ","px;\n    user-select: none;\n"]);return ce=function(){return e},e}var ie=ne.b.div(ce(),(function(e){return e.small?24:32}),(function(e){return e.small?24:32}),(function(e){return e.small?24:32}),(function(e){return e.small?24:32}),(function(e){return e.small?8:16})),oe=ne.b.div(ae(),(function(e){return e.color}),(function(e){return e.small?20:24}),(function(e){return e.small?20:24}),(function(e){return e.selected?"white":e.color}),(function(e){return e.selected?e.color:"rgba(0, 0, 0, 0)"})),ue=ne.b.div(re(),(function(e){return e.small?"\n        top: -8px;\n        right: -10px;\n        width: 16px;\n        height: 16px;\n        font-size: 12px;\n        line-height: 12px;\n    ":"\n        top: -12px;\n        right: -14px;\n        width: 20px;\n        height: 20px;\n        font-size: 14px;\n        line-height: 14px;\n    "}),(function(e){return e.color})),le=Object(l.b)((function(e){return{encounter:e.encounter||null}}),{updateEntityConcentration:function(e,t){return{type:"ENC_ENTITY_CONCENTRATION_UPDATED",payload:{key:e,since:t}}}})((function(e){var t=e.entityKey,n=e.color,c=e.small,i=e.isInCurrentTurn,o=e.encounter,u=e.updateEntityConcentration,l=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=l.current;e&&(e.style.transform="scale(1)")}),[]);var s=Object(r.useMemo)((function(){return o&&void 0!==o.concentrationByKey[t]?o.concentrationByKey[t]:null}),[o,t]),d=Object(r.useMemo)((function(){return o&&s?o.currentRound-s+(i?0:1):0}),[s,o,i]),m=Object(r.useState)(null!==s),f=Object(W.a)(m,2),h=f[0],b=f[1],p=Object(r.useMemo)((function(){if(null===s)return"Click when character starts concentrating";var e="th";return(d+1)%10===1?e="st":(d+1)%10===2?e="nd":(d+1)%10===3&&(e="rd"),"".concat(d+1).concat(e," round of concentration (since round ").concat(s,")")}),[s,d]);return a.a.createElement(ee,{title:p},a.a.createElement(ie,{small:c},a.a.createElement(oe,{color:n,selected:null!==s,onClick:function(){if(null===s&&o&&o.currentRound)u(t,o.currentRound),b(!0),window.requestAnimationFrame((function(){return window.requestAnimationFrame((function(){var e=l.current;e&&(e.style.transform="scale(1)")}))}));else{u(t,null);var e=l.current;e&&(e.style.transform="scale(0.001)"),window.setTimeout((function(){return b(!1)}),100)}},small:c},"C"),h?a.a.createElement(ue,{color:n,ref:l,small:c},d+1):null))}));function se(){var e=Object(te.a)(["\n    width: ","px;\n    transform: rotate(180deg);\n"]);return se=function(){return e},e}function de(){var e=Object(te.a)(["\n    width: ","px;\n"]);return de=function(){return e},e}function me(){var e=Object(te.a)(["\n    height: ","px;\n    transform: rotate(180deg);\n"]);return me=function(){return e},e}function fe(){var e=Object(te.a)(["\n    height: ","px;\n"]);return fe=function(){return e},e}function he(){var e=Object(te.a)(["\n    ","\n    transform: rotate(180deg);\n"]);return he=function(){return e},e}function be(){var e=Object(te.a)(["\n    ","\n    transform: rotateX(180deg);\n"]);return be=function(){return e},e}function pe(){var e=Object(te.a)(["\n    ","\n    transform: rotateY(180deg);\n"]);return pe=function(){return e},e}function ve(){var e=Object(te.a)(["\n    ","\n"]);return ve=function(){return e},e}function ye(){var e=Object(te.a)(["\n    width: ","px;\n    height: ","px;\n"]);return ye=function(){return e},e}function Ee(){var e=Object(te.a)(["\n    width: ","px;\n    height: ","px;\n    ","\n    transition: background-color 0.3s;\n"]);return Ee=function(){return e},e}function ge(){var e=Object(te.a)(["\n    display: flex;\n"]);return ge=function(){return e},e}function Oe(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Oe=function(){return e},e}function Ce(){var e=Object(te.a)(["\n    display: flex;\n"]);return Ce=function(){return e},e}function je(){var e=Object(te.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n    pointer-events: none;\n"]);return je=function(){return e},e}var xe=ne.b.div(je()),we=ne.b.div(Ce()),ke=ne.b.div(Oe()),Te=ne.b.div(ge()),Ie=ne.b.div(Ee(),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.backgroundColor&&"background-color: ".concat(e.backgroundColor,";")})),Ae=Object(ne.a)(ye(),(function(e){return e.width}),(function(e){return e.height})),De=Object(ne.a)(ve(),Ae),Ne=Object(ne.a)(pe(),Ae),Re=Object(ne.a)(be(),Ae),_e=Object(ne.a)(he(),Ae),He=Object(ne.a)(fe(),(function(e){return e.height})),Se=Object(ne.a)(me(),(function(e){return e.height})),Be=Object(ne.a)(de(),(function(e){return e.width})),Pe=Object(ne.a)(se(),(function(e){return e.width})),Me=function(e){return function(t){var n=t.color,r=t.backgroundColor,c=t.width,i=t.height,o=t.className;return a.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},r?a.a.createElement("path",{style:{fill:r,zIndex:-1,transition:"fill 0.3s"},transform:e,d:"M615.2,646.2c-1.7,5.7-12.9,11.7-14.5,11.7H22.5c-1.7,0-12.8-6-14.5-11.7L8.2,19.3V12S16.1,2.3,23.4,1.4H599.80005c7.3.8,15.1,10.6,15.1,10.6v7.3Z"}):null,a.a.createElement("path",{style:{fill:n,zIndex:2,boxShadow:"0 0 20px grey"},transform:e,d:"M611.9,0H11L0,11.5v637L11,660H612l11-11.5V11.5ZM3,12.8l9.2-9.6h5.9A25.8384,25.8384,0,0,0,7,12.9H6.9v.2A36.38553,36.38553,0,0,0,3,21.7ZM3,26.9A42.92655,42.92655,0,0,1,6.9,15.7V644.3a13.90069,13.90069,0,0,1-1.1-2.1,51.50646,51.50646,0,0,1-2.9-9L3,26.9Zm9.2,629.9L3,647.2v-8.9a40.90524,40.90524,0,0,0,3.9,8.6v.2H7a24.86426,24.86426,0,0,0,11.1,9.8H12.2Zm10.1,0A22.56646,22.56646,0,0,1,8.6,647V13A23.74954,23.74954,0,0,1,22.4,3.1H600.6a22.56647,22.56647,0,0,1,13.7,9.8v634a23.74956,23.74956,0,0,1-13.8,9.9Zm597.6-9.6-9.2,9.6h-5.9a24.86437,24.86437,0,0,0,11.1-9.8h.1v-.2a36.38635,36.38635,0,0,0,3.9-8.6l.00006,9Zm0-14.1a41.717,41.717,0,0,1-3.9,11.2V15.7a13.89825,13.89825,0,0,1,1.1,2.1,51.50837,51.50837,0,0,1,2.9,9l-.1,606.3Zm0-611.4a40.9054,40.9054,0,0,0-3.9-8.6v-.2h-.1a24.86433,24.86433,0,0,0-11.1-9.8h5.9l9.2,9.6-.00007,9Z"}))}},Ue=Me(),Ke=Me("translate(0,-32)"),Le=function(e){return function(t){var n=t.color,r=t.backgroundColor,c=t.width,i=t.height,o=t.className;return a.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},r?a.a.createElement("polygon",{fill:r,style:{zIndex:-2},transform:e,points:"8 93 337 93 337 2 8 2 8 93"}):null,a.a.createElement("path",{fill:n,transform:e,d:"M344,6.39V4.47h-6.14V0h-2.68s-1.06,1.54-3.91,1.54H12.73C9.88,1.54,8.82,0,8.82,0H6.14V4.47H0V6.39c2.53,0,2.67,4.14,2.67,4.14V81.91S2.53,86,0,86v2H6.14v7H8.82V3.31H335.18V91.69H8.82V95s1.06-1.54,3.91-1.54H331.27c2.84,0,3.9,1.52,3.91,1.54h2.68V88H344V86c-2.53,0-2.67-4.13-2.67-4.13V10.53S341.47,6.39,344,6.39ZM6.27,81.91H4.14V12.12H6.27Zm333.79.48h-2.12V12.61h2.12Z"}))}},Fe=Le(),ze=Le("translate(-32,0)"),Ye=Le("translate(0,-32)"),Ve=function(e){return function(t){var n=t.color,r=t.backgroundColor,c=t.width,i=t.height,o=t.className;return a.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},r?a.a.createElement("path",{style:{fill:r,zIndex:-1,transition:"fill 0.3s"},transform:e,d:"M275.08,719a32.47,32.47,0,0,0-1.23-4.29c-1.71-4.36-1.13-582.66-1.13-582.66s0-30.43-.58-49c-.36-11.85,1.72-26.54,3.28-35.6a4,4,0,0,1-1.49-1.64c-1.7-3.61-2.41-7.49-1-11.35a6.27,6.27,0,0,1,.93-1.69c-.7-3.15-.33-6.48-1.3-9.54a42.76,42.76,0,0,0-3.54-7,18.66,18.66,0,0,0-5-6.37c-2-1.48-4.08-2.5-5.8-4.27-1.74-.72-3.49-1.42-5.2-2.21l-.4-.21H29.41a5.1,5.1,0,0,1-3.58,1.27,5.83,5.83,0,0,1-2.25,1.44L23.19,6,23,6.05c-.42.25-.87.47-1.29.74a7.34,7.34,0,0,0-1.22.84c1-.91-.26.24-.45.41a5.85,5.85,0,0,1-2.83,1.33,52.05,52.05,0,0,0-3.9,4c-4.59,5.47-4.83,13.51-6.24,20.2,0,.14-.08.27-.11.4a11.08,11.08,0,0,1,.29,1.52c-.16-1.2.09.35.14.59q.14.63.3,1.26a21,21,0,0,0,.88,2.57c1.07,2.59-1.17,5.4-3.49,6.15a3.22,3.22,0,0,1-.7.14C5.94,55.14,8.24,70.62,7.86,83c-.58,18.57-.58,49-.58,49s.64,576.13-1,587.33a5.14,5.14,0,0,1,3.07,6,29.15,29.15,0,0,1-2.67,7,4.68,4.68,0,0,1,.85,2.91c-.27,14.38,12.13,22.59,23.77,28.18a5.7,5.7,0,0,1,.88.53h216.9a5.09,5.09,0,0,1,2.84-1.08,4.1,4.1,0,0,1,1.59-1.45c1-.5,2.07-.93,3.12-1.37l.64-.27-.55.24a6.87,6.87,0,0,0,1.29-.6c.22-.11.45-.18.68-.27,1-1,1.86-1.92,2.41-2.37,2.91-2.43,6.23-4.26,7.86-7.81a4.38,4.38,0,0,1,1.74-2c.81-4.9,2.13-9.72,2.58-14.7a5.32,5.32,0,0,1,.57-2c0-.19-.07-.36-.11-.51-.38-1.74-.87-3.44-1.28-5.17A4.8,4.8,0,0,1,275.08,719Z"}):null,a.a.createElement("path",{style:{fill:n,zIndex:2,boxShadow:"0 0 20px grey"},transform:e,d:"M275.28,654.52v-554c.77-12.76,2.64-38.62,5.52-48.14l.21-.69-.6-.38a21.36,21.36,0,0,1-3.68-3.14,62.8,62.8,0,0,1,2.34-9.56l.12-.34L276.7,10.17l-1.08-.34c-2.52-.8-9.71-4-9.71-8.12V0H15.09V1.71c0,4.13-7,7.26-9.71,8.12l-1.08.34L1.82,38.28l.12.34a64,64,0,0,1,2.34,9.54A21,21,0,0,1,.6,51.32L0,51.7l.21.69C3.09,61.89,5,87.7,5.72,100.48v554C5,667.23,3.09,703.1.21,712.61L0,713.3l.6.38a20.83,20.83,0,0,1,3.68,3.14,61.64,61.64,0,0,1-2.34,9.56l-.12.35,2.48,28.1,1.08.34c2.7.86,9.71,4,9.71,8.12V765H265.91v-1.71c0-4.13,7-7.26,9.71-8.12l1.08-.34,2.48-28.1-.12-.35a64,64,0,0,1-2.34-9.54,21,21,0,0,1,3.68-3.16l.6-.38-.21-.69c-2.88-9.5-4.74-45.31-5.51-58.09m-3.84,73.29s.45,1.07,1,2.61a29.79,29.79,0,0,1-1.33,12.42C268.18,751.6,261,758,250.25,761.58H30.68c-23-7.63-22.8-25.7-22.16-31.09.59-1.63,1.06-2.75,1.09-2.83a12.21,12.21,0,0,0-2.1-9.76c3.38-18.83,1.66-42.81,1.58-43.89V91.12c.09-1.19,1.81-25.21-1.57-44.05a12.41,12.41,0,0,0,2.05-9.88s-.45-1.07-1-2.61A29.8,29.8,0,0,1,9.87,22.16C12.82,13.4,20,7,30.76,3.42H250.32c23.05,7.63,22.8,25.7,22.16,31.09-.59,1.63-1.06,2.75-1.09,2.84a12.19,12.19,0,0,0,2.1,9.75c-3.38,18.83-1.66,42.81-1.58,43.89V673.88c-.09,1.19-1.81,25.21,1.57,44a12.41,12.41,0,0,0-2.05,9.88m7.41-675.3c-1.71,6.15-3,17.57-4,28.45a191.48,191.48,0,0,1,1.5-30.51,23.59,23.59,0,0,0,2.5,2.06m-5.72-14.58c.09-.21,1.13-2.72,2.12-5.82l.51,5.74A61.16,61.16,0,0,0,274,44.4a9.5,9.5,0,0,1-.89-6.47m.42-25.21,1.24,14.07c-.25,1.21-.59,2.48-1,3.69a30.1,30.1,0,0,0-1.55-8.72c-2-6-6.88-13.57-18.42-18.34h8.89c1.25,5.24,8,8.26,10.8,9.3M18.25,3.42h8.88C10.49,10.29,7.46,23.17,7.21,30.61c-.38-1.25-.74-2.56-1-3.82L7.45,12.72c2.79-1,9.55-4.06,10.8-9.3m-13,34.43.51-5.74c1,3.07,2,5.53,2.07,5.66A9.73,9.73,0,0,1,7,44.33a62.24,62.24,0,0,0-1.73-6.48m-.6,12.59A191.42,191.42,0,0,1,6.15,81c-1-10.87-2.29-22.29-4-28.44a21.9,21.9,0,0,0,2.49-2.07M2.15,712.49c1.71-6.15,3-17.57,4-28.44a191.41,191.41,0,0,1-1.5,30.5,23.59,23.59,0,0,0-2.5-2.06m5.72,14.58c-.09.21-1.13,2.72-2.12,5.82l-.51-5.74A60.54,60.54,0,0,0,7,720.6a9.5,9.5,0,0,1,.89,6.47m-.42,25.21L6.21,738.21c.25-1.21.59-2.47,1-3.69a30,30,0,0,0,1.55,8.72c2,6,6.88,13.57,18.42,18.34H18.25c-1.25-5.24-8-8.26-10.8-9.3m255.3,9.3h-8.88c16.64-6.86,19.67-19.75,19.92-27.19.38,1.26.74,2.56,1,3.82l-1.24,14.07c-2.79,1-9.55,4.06-10.8,9.3m13-34.43-.51,5.74c-1-3.08-2-5.53-2.07-5.66a9.73,9.73,0,0,1,.85-6.56,62.24,62.24,0,0,0,1.73,6.48m.6-12.59a191.37,191.37,0,0,1-1.51-30.51c1,10.88,2.29,22.29,4,28.44a21.9,21.9,0,0,0-2.49,2.07"}))}},We=Ve(),Ze=Ve("translate(0,-100)");function qe(){var e=Object(te.a)(["",""]);return qe=function(){return e},e}function Ge(){var e=Object(te.a)(["",""]);return Ge=function(){return e},e}function Xe(){var e=Object(te.a)(["",""]);return Xe=function(){return e},e}function Je(){var e=Object(te.a)(["",""]);return Je=function(){return e},e}function $e(){var e=Object(te.a)(["",""]);return $e=function(){return e},e}function Qe(){var e=Object(te.a)(["",""]);return Qe=function(){return e},e}function et(){var e=Object(te.a)(["",""]);return et=function(){return e},e}function tt(){var e=Object(te.a)(["",""]);return tt=function(){return e},e}var nt=function(e){var t=e.partSize,n=e.Corner,c=e.Top,i=e.Side,o=Object(ne.b)(n)(tt(),De),u=Object(ne.b)(n)(et(),Ne),l=Object(ne.b)(n)(Qe(),Re),s=Object(ne.b)(n)($e(),_e),d=Object(ne.b)(c)(Je(),He),m=Object(ne.b)(c)(Xe(),Se),f=Object(ne.b)(i)(Ge(),Be),h=Object(ne.b)(i)(qe(),Pe);return function(e){var n=e.color,c=void 0===n?"#b13735":n,i=e.backgroundColor,b=e.className,p=e.forceUpdateProp,v=Object(r.useRef)(null),y=Object(r.useState)(t),E=Object(W.a)(y,2),g=E[0],O=E[1],C=Object(r.useState)(t),j=Object(W.a)(C,2),x=j[0],w=j[1];Object(r.useEffect)((function(){return window.addEventListener("resize",k),function(){return window.removeEventListener("resize",k)}}),[]),Object(r.useEffect)((function(){k()}),[v,p]);var k=function(){var e=v.current;e&&(O(Math.max(e.clientWidth-2*t,0)),w(Math.max(e.clientHeight-2*t,0)))},T={color:c,backgroundColor:i,width:t,height:t};return a.a.createElement(xe,{ref:v,className:b},v.current?a.a.createElement(a.a.Fragment,null,a.a.createElement(we,null,a.a.createElement(o,T),a.a.createElement(d,Object.assign({},T,{width:g})),a.a.createElement(u,T)),a.a.createElement(ke,null,a.a.createElement(f,Object.assign({},T,{height:x})),a.a.createElement(Ie,Object.assign({},T,{height:x,width:g})),a.a.createElement(h,Object.assign({},T,{height:x}))),a.a.createElement(Te,null,a.a.createElement(l,T),a.a.createElement(m,Object.assign({},T,{width:g})),a.a.createElement(s,T))):null)}},rt=nt({partSize:32,Corner:Ue,Top:function(e){var t=e.color,n=e.backgroundColor,r=e.width,c=e.height,i=e.className;return a.a.createElement("div",{className:i,style:{backgroundColor:n,width:r,height:c,borderTop:"3px solid ".concat(t),boxSizing:"border-box",transition:"background-color 0.3s"}})},Side:Ke}),at=nt({partSize:32,Corner:Fe,Top:ze,Side:Ye}),ct=nt({partSize:100,Corner:We,Top:function(e){var t=e.color,n=e.backgroundColor,r=e.width,c=e.height,i=e.className;return a.a.createElement("div",{className:i,style:{backgroundColor:n,width:r,height:c,borderTop:"3.5px solid ".concat(t),boxSizing:"border-box"}})},Side:Ze}),it=n(199);function ot(){var e=Object(te.a)(["\n    padding-top: 16px;\n    display: flex;\n    justify-content: space-between;\n\n    & > *:not(:last-child) {\n        margin-right: 8px;\n    }\n"]);return ot=function(){return e},e}function ut(){var e=Object(te.a)(["\n    padding: 0 8px;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n"]);return ut=function(){return e},e}function lt(){var e=Object(te.a)(["\n    font-size: ","px;\n    line-height: ","px;\n    width: ","px;\n    text-align: center;\n"]);return lt=function(){return e},e}function st(){var e=Object(te.a)(["\n    height: ","px;\n    width: ","px;\n    margin-left: auto;\n    margin-right: ","px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    ","\n"]);return st=function(){return e},e}function dt(){var e=Object(te.a)(["\n    height: 18px;\n    width: 18px;\n    border: 2px solid ",";\n    border-radius: 50%;\n    box-sizing: border-box;\n    ","\n"]);return dt=function(){return e},e}function mt(){var e=Object(te.a)(["\n    height: 24px;\n    width: ",";\n    display: flex;\n    justify-content: space-between;\n"]);return mt=function(){return e},e}function ft(){var e=Object(te.a)(["\n    font-size: ","px;\n    line-height: ","px;\n"]);return ft=function(){return e},e}function ht(){var e=Object(te.a)(["\n    height: ","px;\n    margin-right: 8px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: flex-start;\n    cursor: pointer;\n"]);return ht=function(){return e},e}function bt(){var e=Object(te.a)(["\n    && {\n        height: 100%;\n        width: 100%;\n    }\n"]);return bt=function(){return e},e}function pt(){var e=Object(te.a)(["\n    ","\n    margin: 0 8px;\n    cursor: pointer;\n"]);return pt=function(){return e},e}function vt(){var e=Object(te.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 8px;\n    display: flex;\n    align-items: center;\n    box-sizing: border-box;\n    user-select: none;\n\n    ","\n"]);return vt=function(){return e},e}function yt(){var e=Object(te.a)(["\n    position: relative;\n    height: 100%;\n"]);return yt=function(){return e},e}function Et(){var e=Object(te.a)(["\n    height: ","px;\n\n    &:not(:last-child) {\n        margin-bottom: 8px;\n    }\n"]);return Et=function(){return e},e}var gt,Ot=ne.b.div(Et(),(function(e){return e.small?"56":"80"})),Ct=ne.b.div(yt()),jt=ne.b.div(vt(),(function(e){return e.small&&"\n        transition: 300ms;\n        border-radius: 4px;\n        padding-left: 0;\n        ".concat(e.isSelected?"\n            background-color: #ddd;\n            box-shadow: 0px 3px 3px -2px rgba(0,0,0,0.4), 0px 3px 4px 0px rgba(0,0,0,0.24), 0px 1px 8px 0px rgba(0,0,0,0.18);\n        ":"\n            background-color: white;\n            box-shadow: 0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12);\n        ","\n    ")})),xt=ne.b.div(pt(),(function(e){return e.small?"\n        width: 40px;\n        height: 40px;\n        min-width: 40px;\n        min-height: 40px;\n    ":"\n        width: 60px;\n        height: 60px;\n        min-width: 60px;\n        min-height: 60px;\n    "})),wt=Object(ne.b)(it.a)(bt()),kt=ne.b.div(ht(),(function(e){return e.small?"40":"64"})),Tt=ne.b.div(ft(),(function(e){return e.small?"18":"24"}),(function(e){return e.small?"18":"24"})),It=ne.b.div(mt(),(function(e){return e.small?"100%":"150px"})),At=ne.b.div(dt(),(function(e){return e.fail?"#b13735":"#08a300"}),(function(e){return e.enabled&&"background-color: ".concat(e.fail?"#b13735":"#08a300",";")})),Dt=ne.b.div(st(),(function(e){return e.small?"40":"64"}),(function(e){return e.small?"144":"200"}),(function(e){return e.small?"8":"16"}),(function(e){return e.onClick?"cursor: pointer;":""})),Nt=ne.b.div(lt(),(function(e){return e.small?"20":"32"}),(function(e){return e.small?"20":"32"}),(function(e){return e.width})),Rt=ne.b.div(ut()),_t=ne.b.div(ot());!function(e){e.BeyondCharacter="BEYOND_CHARACTER",e.CustomCharacter="CUSTOM_CHARACTER"}(gt||(gt={}));var Ht=Object(l.b)((function(e){return{selectedKey:e.encounter&&null!==e.encounter.selectedEntityKey?e.encounter.selectedEntityKey:null}}),{updateBeyondCharacterById:N,selectEntity:function(e){return{type:"ENC_ENTITY_SELECTED",payload:{key:e}}},updateCustomCharacterHitPoints:A})((function(e){var t=e.id,n=e.entityKey,c=e.type,i=e.name,l=e.maxHitPoints,s=e.removedHitPoints,d=void 0===s?0:s,m=e.temporaryHitPoints,f=void 0===m?0:m,h=e.deathSaves,b=e.avatarUrl,p=e.isInCurrentTurn,v=e.isCurrentlyFirst,E=e.color,g=e.selectedKey,O=e.updateBeyondCharacterById,C=e.selectEntity,j=e.updateCustomCharacterHitPoints,x=Object(Z.a)(),w=Object(q.a)(x.breakpoints.down("sm")),k=Object(r.useState)(null),T=Object(W.a)(k,2),I=T[0],A=T[1],D=Object(r.useState)(""),N=Object(W.a)(D,2),R=N[0],_=N[1],H=Object(r.useMemo)((function(){return g===n}),[g,n]);Object(r.useEffect)((function(){c===gt.BeyondCharacter&&t&&O(t,l)}),[c,t,l,O,H,v]);var S=function(){C(null),A(null),_("")},B=function(){C(H?null:n)};return a.a.createElement(Ot,{small:w},a.a.createElement(Ct,null,w?null:a.a.createElement(rt,{color:E,backgroundColor:H?"#ddd":"white"}),a.a.createElement(jt,{small:w,isSelected:H},a.a.createElement(xt,{small:w,onClick:B},a.a.createElement(wt,{src:b,variant:"rounded"})),a.a.createElement(kt,{small:w,onClick:B},a.a.createElement(Tt,{small:w},i),a.a.createElement(It,{small:w},h&&!w&&d>=l?a.a.createElement(a.a.Fragment,null,a.a.createElement(At,{fail:!0,enabled:h.failCount&&h.failCount>0||!1}),a.a.createElement(At,{fail:!0,enabled:h.failCount&&h.failCount>1||!1}),a.a.createElement(At,{fail:!0,enabled:h.failCount&&h.failCount>2||!1}),a.a.createElement("div",{style:{width:"16px"}}),a.a.createElement(At,{enabled:h.successCount&&h.successCount>0||!1}),a.a.createElement(At,{enabled:h.successCount&&h.successCount>1||!1}),a.a.createElement(At,{enabled:h.successCount&&h.successCount>2||!1})):null)),a.a.createElement("div",{style:{flex:1}}),a.a.createElement(le,{entityKey:n,color:E,small:w,isInCurrentTurn:p}),a.a.createElement(Dt,{small:w,onClick:c===gt.CustomCharacter?function(e){return A(e.currentTarget)}:void 0},a.a.createElement(Nt,{small:w,width:w?64:48},l-d),a.a.createElement(Nt,{small:w,width:w?16:12,style:{color:"grey"}},"/"),a.a.createElement(Nt,{small:w,width:w?64:48},l),a.a.createElement(Nt,{small:w,width:w?48:36,style:{color:"grey"}},"[",f,"]")),a.a.createElement(G.a,{anchorEl:I,open:!!I,onClose:S,style:{marginTop:w?"70px":"80px"}},a.a.createElement(Rt,null,a.a.createElement(X.a,{style:{width:"100%"},label:"Hit Points",type:"number",autoFocus:!0,value:R,onChange:function(e){return _(e.target.value)}}),a.a.createElement(_t,null,a.a.createElement(J.a,{variant:"contained",color:"primary",onClick:function(){var e=parseInt(R);Object(V.isNaN)(e)||j(n,-Math.abs(e),0),S()}},"Damage"),a.a.createElement(J.a,{variant:"outlined",color:"secondary",onClick:function(){var e=parseInt(R);Object(V.isNaN)(e)||j(n,0,Math.abs(e)),S()}},"Temp"),a.a.createElement(u.a,{theme:Object(o.a)(Object(y.a)({},x,{palette:Object(y.a)({},x.palette,{primary:{main:"#08a300"}})}))},a.a.createElement(J.a,{variant:"contained",color:"primary",onClick:function(){var e=parseInt(R);Object(V.isNaN)(e)||j(n,Math.abs(e),0),S()}},"Heal"))))))))})),St=function(e){if(!e)return[];var t=e.beyondCharacters,n=e.customCharacters,r=e.initiativeById,a=e.currentTurnKey,c=[];if(Object(V.keys)(t).forEach((function(e){var n=parseInt(e),a=r[n];a&&c.push({initiative:a,type:gt.BeyondCharacter,entity:t[n],key:n,dividerAfterThisOne:!1})})),Object(V.keys)(n).forEach((function(e){var t=parseInt(e),a=r[t];a&&c.push({initiative:a,type:gt.CustomCharacter,entity:n[t],key:t,dividerAfterThisOne:!1})})),c.sort((function(e,t){return e.initiative<t.initiative?1:e.initiative>t.initiative?-1:0})),0===c.length)return[];for(c[c.length-1].dividerAfterThisOne=!0;c[0].key!==a;)c.push(c.shift());return c[0].isCurrentlyFirst=!0,c},Bt={beyondCharacters:{},customCharacters:{},initiativeById:{},currentId:1,currentTurnInitiative:1e6,currentTurnKey:0,currentRound:1,selectedEntityKey:null,customCharacterHitPoints:{},textNotesByKey:{},imgNotesByKey:{},concentrationByKey:{}},Pt=function(e,t){var n=e.beyondCharacters,r=t.payload.name,a=Object(V.filter)((function(e){return n[parseInt(e)].name.startsWith(r)}),Object(V.keys)(n)).length;return 0===a?Object(y.a)({},e,{currentId:e.currentId+1,beyondCharacters:Object(y.a)({},e.beyondCharacters,Object(Y.a)({},e.currentId,t.payload)),textNotesByKey:Object(y.a)({},e.textNotesByKey,Object(Y.a)({},e.currentId,"Notes for ".concat(r," \n")))}):Object(y.a)({},e,{currentId:e.currentId+1,beyondCharacters:Object(y.a)({},e.beyondCharacters,Object(Y.a)({},e.currentId,Object(y.a)({},t.payload,{name:"".concat(r," #").concat(a+1)}))),textNotesByKey:Object(y.a)({},e.textNotesByKey,Object(Y.a)({},e.currentId,"Notes for ".concat(r," #").concat(a+1," \n")))})},Mt=function(e,t){var n=e.customCharacters,r=t.payload.name,a=Object(V.filter)((function(e){return n[parseInt(e)].name.startsWith(r)}),Object(V.keys)(n)).length;return 0===a?Object(y.a)({},e,{currentId:e.currentId+1,customCharacters:Object(y.a)({},e.customCharacters,Object(Y.a)({},e.currentId,t.payload)),customCharacterHitPoints:Object(y.a)({},e.customCharacterHitPoints,Object(Y.a)({},e.currentId,{removedHitPoints:0,temporaryHitPoints:0})),textNotesByKey:Object(y.a)({},e.textNotesByKey,Object(Y.a)({},e.currentId,"Notes for ".concat(r," \n")))}):Object(y.a)({},e,{currentId:e.currentId+1,customCharacters:Object(y.a)({},e.customCharacters,Object(Y.a)({},e.currentId,Object(y.a)({},t.payload,{name:"".concat(r," #").concat(a+1)}))),customCharacterHitPoints:Object(y.a)({},e.customCharacterHitPoints,Object(Y.a)({},e.currentId,{removedHitPoints:0,temporaryHitPoints:0})),textNotesByKey:Object(y.a)({},e.textNotesByKey,Object(Y.a)({},e.currentId,"Notes for ".concat(r," #").concat(a+1," \n")))})},Ut=function(e,t){var n=Object(V.findKey)((function(e){return e.id===t.payload.id}),e.beyondCharacters);return n?Object(y.a)({},e,{beyondCharacters:Object(V.omit)(n,e.beyondCharacters)||{},initiativeById:Object(V.omit)(n,e.initiativeById)||{}}):e},Kt=function(e,t){var n=e.customCharacters,r=t.payload.name,a=Object(V.filter)((function(e){return n[parseInt(e)].name.startsWith(r)}),Object(V.keys)(n));if(0===a.length)return e;var c=Object(V.reduce)((function(e,t){var a=parseInt(t),c=n[a];if(c.name===r)return e.number<1?{key:a,number:1}:e;var i=c.name.slice(r.length).split("#"),o=parseInt(i[i.length-1]);return o>e.number?{key:a,number:o}:e}),{key:0,number:-1},a);return Object(y.a)({},e,{customCharacters:Object(V.omit)(c.key,n)||{}})},Lt=function(e,t){var n=e.beyondCharacters,r=e.initiativeById,a=t.payload,c=a.character,i=a.initiative,o=Object(V.keys)(n).find((function(e){return n[parseInt(e)].id===c.id}));return o?Object(y.a)({},e,{initiativeById:Object(y.a)({},r,Object(Y.a)({},o,i))}):e},Ft=function(e,t){var n=e.customCharacters,r=e.initiativeById,a=t.payload,c=a.character,i=a.initiative,o=Object(V.keys)(n).filter((function(e){return n[parseInt(e)].name.startsWith(c.name)}));if(0===o.length)return e;var u={};return o.forEach((function(e){return u[parseInt(e)]=i})),Object(y.a)({},e,{initiativeById:Object(y.a)({},r,{},u)})},zt=function e(t){var n=t.currentTurnInitiative,r=t.beyondCharacters,a=t.customCharacters,c=t.initiativeById;if(1e6===n){var i=function(e,t){var n=parseInt(t),r=c[n];return r&&r>e.initiative?{key:n,initiative:r}:e},o=Object(V.reduce)(i,{key:-1,initiative:-100},Object(V.keys)(r)),u=o.key,l=o.initiative,s=Object(V.reduce)(i,{key:-1,initiative:-100},Object(V.keys)(a)),d=s.key,m=s.initiative;return-100===m&&-100===l?t:Object(y.a)({},t,{currentTurnInitiative:Math.max(l,m),currentTurnKey:l>m?u:d})}var f=function(e){var t=parseInt(e),r=c[t];return!(!r||r!==n)},h=parseInt(Object(V.keys)(r).find(f))||parseInt(Object(V.keys)(a).find(f));return isNaN(h)?e(Object(y.a)({},t,{currentTurnInitiative:1e6})):Object(y.a)({},t,{currentTurnKey:h})},Yt=function(e){var t=St(e);if(t.length<2)return Object(y.a)({},e,{selectedEntityKey:null,currentRound:e.currentRound+1});var n=t[1],r=n.initiative,a=n.key,c=e.currentRound;return r>t[0].initiative&&(c+=1),Object(y.a)({},e,{selectedEntityKey:null,currentTurnInitiative:r,currentTurnKey:a,currentRound:c})},Vt=function(e){var t=St(e);if(t.length<2)return Object(y.a)({},e,{selectedEntityKey:null,currentRound:e.currentRound-1});var n=t[t.length-1],r=n.initiative,a=n.key,c=e.currentRound;return r<t[0].initiative&&(c-=1),Object(y.a)({},e,{selectedEntityKey:null,currentTurnInitiative:r,currentTurnKey:a,currentRound:c})},Wt=function(e,t){var n=t.payload,r=n.key,a=n.update,c=n.temp,i=e.customCharacterHitPoints[r],o=i.removedHitPoints,u=i.temporaryHitPoints,l=u;c&&(l=Math.max(0,u+c)),a<0&&(l=Math.max(0,u+a));var s=o;return s=a>=0?Math.max(0,o-a):Math.max(0,o-a-Math.min(Math.abs(a),u)),Object(y.a)({},e,{selectedEntityKey:null,customCharacterHitPoints:Object(y.a)({},e.customCharacterHitPoints,Object(Y.a)({},r,{removedHitPoints:s,temporaryHitPoints:l}))})},Zt=function(e,t){var n=t.payload,r=n.key,a=n.since;return null===a?Object(y.a)({},e,{concentrationByKey:Object(V.omit)(r,e.concentrationByKey)}):Object(y.a)({},e,{concentrationByKey:Object(y.a)({},e.concentrationByKey,Object(Y.a)({},r,a))})},qt=function(e,t){var n=t.payload,r=n.id,a=n.character,c=e.beyondCharacters,i=Object(V.keys)(c).find((function(e){return c[parseInt(e)].id===r}));return!i||isNaN(parseInt(i))?e:Object(y.a)({},e,{beyondCharacters:Object(y.a)({},c,Object(Y.a)({},parseInt(i),a))})},Gt=Object(d.c)({beyondCharacters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BEYOND_CHARACTER_ADDED":return[].concat(Object(E.a)(e),[t.payload]);case"BEYOND_CHARACTER_UPDATED":return S(e,t);case"BEYOND_CHARACTER_MAX_HP_UPDATED":return B(e,t);case"BEYOND_CHARACTER_DELETED":return P(e,t);case"BEYOND_CHARACTER_ALREADY_EXISTS":case"BEYOND_CHARACTER_FETCH_FAILED":default:return e}},customCharacters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CUSTOM_CHARACTER_ADDED":return[].concat(Object(E.a)(e),[t.payload]);case"CUSTOM_CHARACTER_DELETED":return L(e,t);case"CUSTOM_CHARACTER_UPDATED":return F(e,t);default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_DIALOG_OPENED":return e.errorDialog.isOpen?e:Object(y.a)({},e,{errorDialog:{isOpen:!0,message:t.payload}});case"ERROR_DIALOG_CLOSED":return Object(y.a)({},e,{errorDialog:{isOpen:!1,message:e.errorDialog.message}});default:return e}},encounter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENC_BEYOND_CHARACTER_ADDED":return zt(Pt(e,t));case"ENC_CUSTOM_CHARACTER_ADDED":return zt(Mt(e,t));case"ENC_BEYOND_CHARACTER_REMOVED":return zt(Ut(e,t));case"ENC_CUSTOM_CHARACTER_REMOVED":return zt(Kt(e,t));case"ENC_BEYOND_CHARACTER_INITIATIVE_UPDATED":return zt(Lt(e,t));case"ENC_CUSTOM_CHARACTER_INITIATIVE_UPDATED":return zt(Ft(e,t));case"ENC_RESET":return Bt;case"ENC_CREATED":return zt(Object(y.a)({},e,{currentTurnInitiative:1e6}));case"ENC_NEXT_TURN":return Yt(e);case"ENC_PREV_TURN":return Vt(e);case"ENC_ENTITY_SELECTED":return Object(y.a)({},e,{selectedEntityKey:t.payload.key});case"ENC_CUSTOM_CHARACTER_HIT_POINTS_UPDATED":return Wt(e,t);case"ENC_TEXT_NOTES_UPDATED":return Object(y.a)({},e,{textNotesByKey:Object(y.a)({},e.textNotesByKey,Object(Y.a)({},t.payload.key,t.payload.text))});case"ENC_IMG_NOTES_UPDATED":return Object(y.a)({},e,{imgNotesByKey:Object(y.a)({},e.imgNotesByKey,Object(Y.a)({},t.payload.key,t.payload.img))});case"ENC_ENTITY_CONCENTRATION_UPDATED":return Zt(e,t);case"ENC_BEYOND_CHARACTER_UPDATED_BY_ID":return qt(e,t);default:return e}}}),Xt={key:"root",storage:b.a,stateReconciler:v.a,blacklist:["ui"]},Jt=Object(d.d)(Object(f.a)(Xt,Gt),Object(d.a)(m.a)),$t=Object(f.b)(Jt);function Qt(){var e=Object(te.a)(["\n    font-family: 'Yeon Sung';\n    font-size: 40px;\n    line-height: 40px;\n    color: orange;\n"]);return Qt=function(){return e},e}function en(){var e=Object(te.a)(["\n    width: 400px;\n    max-width: 80%;\n"]);return en=function(){return e},e}function tn(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]);return tn=function(){return e},e}function nn(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    background-color: #666666;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return nn=function(){return e},e}var rn=ne.b.div(nn()),an=ne.b.div(tn()),cn=ne.b.img(en()),on=ne.b.div(Qt()),un=function(){return a.a.createElement(rn,null,a.a.createElement(an,null,a.a.createElement(cn,{src:"".concat("/dnd-combat-tracker","/fire.gif")}),a.a.createElement(on,null,"Loading")))},ln=n(174),sn=n(59),dn=n(200),mn=n(197),fn=n(181),hn=n(180),bn=n(183),pn=n(182),vn=n(185),yn=n(186),En=n(187),gn=n(184),On=n(188),Cn=n(189),jn=n(190),xn=n(191),wn=n(192),kn=n(193);function Tn(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    opacity: ",';\n    background-image: url("','");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n']);return Tn=function(){return e},e}var In=ne.b.div(Tn(),(function(e){return e.opacity}),(function(e){return e.src})),An=function(e){var t=e.src,n=e.transitionDuration,c=void 0===n?200:n,i=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(1),l=Object(W.a)(u,2),s=l[0],d=l[1],m=Object(r.useState)(t),f=Object(W.a)(m,2),h=f[0],b=f[1],p=Object(r.useState)(void 0),v=Object(W.a)(p,2),y=v[0],E=v[1];return Object(r.useEffect)((function(){var e=i.current,n=o.current,r=null,a=null,u=null;return e&&n&&(e.style.transition="opacity ".concat(c,"ms"),n.style.transition="opacity ".concat(c,"ms"),E(t),r=window.requestAnimationFrame((function(){d(0),a=setTimeout((function(){e.style.transition="",n.style.transition="",b(t),u=window.requestAnimationFrame((function(){d(1)}))}),c)}))),function(){r&&window.cancelAnimationFrame(r),a&&window.clearTimeout(a),u&&window.cancelAnimationFrame(u)}}),[t,c]),a.a.createElement(a.a.Fragment,null,a.a.createElement(In,{opacity:s,src:h,ref:i}),a.a.createElement(In,{opacity:1-s,src:y,ref:o}))};function Dn(){var e=Object(te.a)(["\n    border: 1px solid ",";\n    border-radius: 50%;\n    opacity: 0.5;\n    margin-bottom: 10px;\n\n    ","\n"]);return Dn=function(){return e},e}function Nn(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n\n    ","\n\n    & > :not(:last-child) {\n        margin-bottom: 8px;\n    }\n"]);return Nn=function(){return e},e}function Rn(){var e=Object(te.a)(["\n    width: 100%;\n    display: flex;\n    justify-content: center;\n\n    ","\n"]);return Rn=function(){return e},e}function _n(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n\n    ","\n"]);return _n=function(){return e},e}var Hn=ne.b.div(_n(),(function(e){return e.small?"\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: center;\n    ":"\n        justify-content: center;\n        align-items: flex-start;\n    "})),Sn=ne.b.div(Rn(),(function(e){return e.small&&"flex-direction: column;"})),Bn=ne.b.div(Nn(),(function(e){return e.small?"\n        width: 100%;\n    ":"\n        width: 500px;\n        min-width: 300px;\n        max-width: 500px;\n        margin: 16px;\n    "})),Pn=ne.b.div(Dn(),(function(e){return e.color}),(function(e){return e.small?"\n        height: 0;\n        margin: 16px;\n    ":"\n        width: 0;\n        margin-top: 56px;\n\n        ".concat(e.marginTopOverride?"margin-top: ".concat(e.marginTopOverride,"px;"):"","\n        ").concat(e.marginBottomOverride?"margin-bottom: ".concat(e.marginBottomOverride,"px;"):"","\n    ")})),Mn=function(e){var t=e.titles,n=e.children,r=e.marginBottomOverride,c=e.marginTopOverride,i=Object(Z.a)(),o=Object(q.a)(i.breakpoints.down("sm")),u=n.filter((function(e){return null!==e}));return a.a.createElement(Hn,{small:o},a.a.createElement(Sn,{small:o},u.length>0?a.a.createElement(Bn,{small:o},a.a.createElement(sn.a,{variant:"h5"},t[0]),a.a.cloneElement(u[0],{small:o})):null,u.length>1?u.slice(1).map((function(e,n){return a.a.createElement(a.a.Fragment,{key:e.key||n},a.a.createElement(Pn,{color:i.palette.secondary.main,small:o,marginTopOverride:c,marginBottomOverride:r}),a.a.createElement(Bn,{small:o},a.a.createElement(sn.a,{variant:"h5"},t[n+1]),a.a.cloneElement(e,{small:o})))})):null))};function Un(){var e=Object(te.a)(["\n    width: 100%;\n    margin-bottom: 16px;\n    border: 1px solid ",";\n    border-radius: 50%;\n    opacity: 0.5;\n"]);return Un=function(){return e},e}function Kn(){var e=Object(te.a)(["\n    ","\n    bottom: 0;\n    background: linear-gradient(transparent, white);\n"]);return Kn=function(){return e},e}function Ln(){var e=Object(te.a)(["\n    ","\n    top: 0;\n    background: linear-gradient(white, transparent);\n"]);return Ln=function(){return e},e}function Fn(){var e=Object(te.a)(["\n    position: absolute;\n    left: calc(2%);\n    width: 96%;\n    border-radius: 16px;\n    height: 20px;\n"]);return Fn=function(){return e},e}function zn(){var e=Object(te.a)(["\n    height: calc(100% - 32px);\n    padding: 16px;\n\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n\n    overflow-y: scroll;\n\n    &::-webkit-scrollbar {\n        display: none;\n    }\n"]);return zn=function(){return e},e}function Yn(){var e=Object(te.a)(["\n    position: relative;\n    ","\n"]);return Yn=function(){return e},e}var Vn=ne.b.div(Yn(),(function(e){return e.fullWidth?"\n        width: 98%;\n        height: calc(100% - ".concat(e.fullScreen?138:100,"px);\n    "):"\n        width: 50%;\n        max-width: 600px;\n        height: ".concat(e.short?"420":"480","px;\n    ")})),Wn=ne.b.div(zn()),Zn=Object(ne.a)(Fn()),qn=(ne.b.div(Ln(),Zn),ne.b.div(Kn(),Zn)),Gn=ne.b.div(Un(),(function(e){return e.color})),Xn=Object(l.b)((function(e){return{encounter:e.encounter||null}}))((function(e){var t=e.encounter,n=e.fullWidth,c=e.fullScreen,i=e.short,o=Object(Z.a)(),u=Object(r.useMemo)((function(){return St(t)}),[t]),l=Object(r.useMemo)((function(){return u.findIndex((function(e){return e.dividerAfterThisOne}))}),[u]);return a.a.createElement(Vn,{fullWidth:n,fullScreen:c,short:i},a.a.createElement(Wn,null,u.map((function(e,n){var r,c=e.type,i=e.entity,u=e.key,s=e.dividerAfterThisOne,d=e.isCurrentlyFirst,m=Object(y.a)({key:u,entityKey:u,type:c,isInCurrentTurn:n<=l,isCurrentlyFirst:d},i);c===gt.CustomCharacter&&(m=Object(y.a)({},m,{removedHitPoints:t&&t.customCharacterHitPoints[u]&&t.customCharacterHitPoints[u].removedHitPoints||0,temporaryHitPoints:t&&t.customCharacterHitPoints[u]&&t.customCharacterHitPoints[u].temporaryHitPoints||0}));var f=i.themeColor&&(null===(r=i.themeColor)||void 0===r?void 0:r.themeColor)||o.palette.primary.main;return a.a.createElement(a.a.Fragment,{key:u},a.a.createElement(Ht,Object.assign({},m,{color:c===gt.BeyondCharacter?f:o.palette.secondary.main})),s?a.a.createElement(Gn,{color:o.palette.secondary.main,key:"".concat(u,"-div")}):null)}))),a.a.createElement(qn,null),a.a.createElement(ct,{forceUpdateProp:"".concat(i).concat(n).concat(c)}))})),Jn=n(2),$n=n(172),Qn=n(173);function er(){var e=Object(te.a)(["\n    width: 100%;\n    flex-grow: 1;\n    height: 56px;\n    min-height: 56px;\n    max-height: 56px;\n"]);return er=function(){return e},e}var tr=ne.b.div(er()),nr=function(e){var t=e.children,n=Object(Jn.a)(e,["children"]);return a.a.createElement(tr,null,a.a.createElement($n.a,Object.assign({position:"fixed",color:"secondary",style:{minHeight:"56px"}},n),a.a.createElement(Qn.a,{style:{minHeight:"56px",paddingLeft:"4px",paddingRight:"10px"}},t)))},rr=n(140),ar=n(196);function cr(){var e=Object(te.a)(["\n    && {\n        padding: 0 6px;\n        min-height: 56px;\n        height: 56px;\n    }\n"]);return cr=function(){return e},e}var ir=Object(ne.b)(Qn.a)(cr()),or=Object(l.b)((function(e){return{encounter:e&&e.encounter||null}}),{addBeyondCharacterToEncounter:function(e){return{type:"ENC_BEYOND_CHARACTER_ADDED",payload:e}},removeBeyondCharacterFromEncounter:function(e){return{type:"ENC_BEYOND_CHARACTER_REMOVED",payload:e}},updateBeyondCharacterInitiative:function(e,t){return{type:"ENC_BEYOND_CHARACTER_INITIATIVE_UPDATED",payload:{character:e,initiative:t}}}})((function(e){var t=e.character,n=e.encounter,c=e.addBeyondCharacterToEncounter,i=e.removeBeyondCharacterFromEncounter,o=e.updateBeyondCharacterInitiative,u=Object(Z.a)(),l=Object(q.a)(u.breakpoints.down("sm")),s=Object(r.useState)(""),d=Object(W.a)(s,2),m=d[0],f=d[1],h=Object(r.useMemo)((function(){return!!n&&Object.keys(n.beyondCharacters).some((function(e){return n.beyondCharacters[parseInt(e)].name===t.name}))}),[t,n]);Object(r.useEffect)((function(){h||f("")}),[h]),Object(r.useEffect)((function(){if(n){var e=Object(V.keys)(n.beyondCharacters).find((function(e){return n.beyondCharacters[parseInt(e)].name===t.name}));if(void 0===e||Object(V.isNaN)(parseInt(e)))return;var r=n.initiativeById[parseInt(e)];void 0!==r&&f(r.toString())}}),[]);var b={disabled:!h,label:h?"Initiative":"",type:"number",value:m,onChange:function(e){var n=e.target.value;f(n);var r=parseInt(n);Object(V.isNaN)(r)||o(t,r)},style:{width:"64px"}};return a.a.createElement(rr.a,{elevation:3,style:{width:"100%",height:"56px"}},a.a.createElement(ir,null,a.a.createElement(ar.a,{disabled:!n,checked:h,color:"primary",onClick:function(){if(h)i(t),f("");else{c(t);var e=parseInt(m);Object(V.isNaN)(e)||o(t,e)}}}),a.a.createElement(sn.a,{variant:l?"body1":"h6"},t.name),a.a.createElement("div",{style:{flexGrow:1}}),a.a.createElement(X.a,b)))})),ur=n(175),lr=n(176);function sr(){var e=Object(te.a)(["\n    width: 18px;\n    height: 18px;\n    margin: 12px;\n    border-radius: 2px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n\n    color: white;\n    background-color: white;\n    cursor: pointer;\n    user-select: none;\n\n    transition: background-color 300ms, border-color 300ms;\n\n    ","\n"]);return sr=function(){return e},e}function dr(){var e=Object(te.a)(["\n    && {\n        padding: 0 6px;\n        min-height: 56px;\n        height: 56px;\n    }\n"]);return dr=function(){return e},e}var mr=Object(ne.b)(Qn.a)(dr()),fr=ne.b.div(sr(),(function(e){return e.children?"\n        background-color: ".concat(e.palette.primary.main,";\n        border: 2px solid rgba(0, 0, 0, ").concat(e.palette.primary.main,");\n    "):"\n        border: 2px solid rgba(0, 0, 0, 0.54);\n    "})),hr=Object(l.b)((function(e){return{encounter:e&&e.encounter||null}}),{addCustomCharacterToEncounter:function(e){return{type:"ENC_CUSTOM_CHARACTER_ADDED",payload:e}},removeCustomCharacterFromEncounter:function(e){return{type:"ENC_CUSTOM_CHARACTER_REMOVED",payload:e}},updateCustomCharacterInitiative:function(e,t){return{type:"ENC_CUSTOM_CHARACTER_INITIATIVE_UPDATED",payload:{character:e,initiative:t}}}})((function(e){var t=e.character,n=e.encounter,c=e.addCustomCharacterToEncounter,i=e.removeCustomCharacterFromEncounter,o=e.updateCustomCharacterInitiative,u=Object(Z.a)(),l=Object(q.a)(u.breakpoints.down("sm")),s=Object(r.useState)(""),d=Object(W.a)(s,2),m=d[0],f=d[1],h=Object(r.useMemo)((function(){if(!n)return null;var e=Object(V.reduce)((function(e,n){return e+(n.name.startsWith(t.name)?1:0)}),0,n.customCharacters);return 0===e?null:e}),[t,n]);Object(r.useEffect)((function(){h||f("")}),[h]),Object(r.useEffect)((function(){if(n){var e=Object(V.keys)(n.customCharacters).find((function(e){return n.customCharacters[parseInt(e)].name===t.name}));if(void 0===e||Object(V.isNaN)(parseInt(e)))return;var r=n.initiativeById[parseInt(e)];void 0!==r&&f(r.toString())}}),[]);var b=function(){return i(t)},p=function(){c(t);var e=parseInt(m);Object(V.isNaN)(e)||o(t,e)},v={disabled:!h,label:h?"Initiative":"",type:"number",value:m,onChange:function(e){var n=e.target.value;f(n);var r=parseInt(n);Object(V.isNaN)(r)||o(t,r)},style:{width:"64px"}};return a.a.createElement(rr.a,{elevation:3,style:{width:"100%",height:"56px"}},a.a.createElement(mr,null,a.a.createElement(fr,{palette:u.palette,onClick:function(){if(h&&0!==h)for(var e=0;e<h;++e)b();else p()}},h),a.a.createElement(sn.a,{variant:l?"body1":"h6"},t.name),a.a.createElement("div",{style:{flexGrow:1}}),a.a.createElement(X.a,v),a.a.createElement(ln.a,{size:"small",onClick:b,disabled:!h},a.a.createElement(ur.a,null)),a.a.createElement(ln.a,{size:"small",onClick:p},a.a.createElement(lr.a,null))))})),br=Object(l.b)((function(e){return{characters:e&&e.beyondCharacters||[]}}))((function(e){var t=e.characters;return a.a.createElement(a.a.Fragment,null,t.length>0?navigator.onLine?t.map((function(e){return a.a.createElement(or,{key:e.id,character:e})})):a.a.createElement(a.a.Fragment,null,a.a.createElement(sn.a,{variant:"body1"},"While you are offline your D&D Beyond characters will be treated as custom characters - you'll have to keep track of their hit points manually."),t.map((function(e){return a.a.createElement(hr,{key:e.id,character:{name:e.name,maxHitPoints:e.maxHitPoints,avatarUrl:e.avatarUrl}})}))):a.a.createElement(sn.a,{variant:"body1"},"Currently you don't have any imported D&D Beyond characters."))})),pr=Object(l.b)((function(e){return{characters:e&&e.customCharacters||[]}}))((function(e){var t=e.characters;return a.a.createElement(a.a.Fragment,null,t.length>0?t.map((function(e){return a.a.createElement(hr,{key:e.name,character:e})})):a.a.createElement(sn.a,{variant:"body1"},"Currently you don't have any saved custom characters."))}));function vr(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: calc(100% - 24px);\n    height: calc(100% - 16px);\n    margin: 8px 12px;\n    touch-action: none;\n"]);return vr=function(){return e},e}function yr(){var e=Object(te.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n    margin-top: 16px;\n"]);return yr=function(){return e},e}var Er=ne.b.div(yr(),(function(e){return e.short?885:920}),(function(e){return e.short?220:260})),gr=ne.b.canvas(vr()),Or=Object(l.b)((function(e){return{imageNotes:e.encounter&&e.encounter.imgNotesByKey||{},currentKey:e.encounter&&(e.encounter.selectedEntityKey||e.encounter.currentTurnKey)||null}}),{updateImgNotes:function(e,t){return{type:"ENC_IMG_NOTES_UPDATED",payload:{key:e,img:t}}}})((function(e){var t=e.short,n=e.imageNotes,c=e.currentKey,i=e.updateImgNotes,o=Object(r.useRef)(null),u=Object(r.useRef)(null),l=Object(r.useState)(null),s=Object(W.a)(l,2),d=s[0],m=s[1],f=Object(r.useState)({}),h=Object(W.a)(f,2),b=h[0],p=h[1];Object(r.useEffect)((function(){return window.addEventListener("resize",E),function(){return window.removeEventListener("resize",E)}}),[]),Object(r.useEffect)((function(){E()}),[o]),Object(r.useEffect)((function(){if(!d)return m(c),void v();var e=o.current;e&&(i(d,e.toDataURL()),v()),m(c)}),[c]);var v=function(){if(c){var e,t=n[c],r=o.current;if(r)if(null===(e=r.getContext("2d"))||void 0===e||e.clearRect(0,0,1e5,1e5),t){var a=new window.Image;a.addEventListener("load",(function(){var e;null===(e=r.getContext("2d"))||void 0===e||e.drawImage(a,0,0)})),a.setAttribute("src",t)}}},E=function(){var e=o.current;if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;p({width:n,height:r})}},g=Object(y.a)({ref:o,onPointerMove:function(e){var t=o.current;if(t){var n=t.getContext("2d");if(n){var r=e.pressure,a=e.buttons,c=e.clientX,i=e.clientY,l=c-t.getBoundingClientRect().x,s=i-t.getBoundingClientRect().y,d=r||1;if(!r||!a)return void(u.current=null);u.current&&(n.beginPath(),n.moveTo(u.current.x,u.current.y),n.lineTo(l,s),n.lineWidth=2*d,n.stroke()),u.current={x:l,y:s}}}},onPointerUp:function(){return u.current=null}},b);return a.a.createElement(Er,{short:t},a.a.createElement(gr,g),a.a.createElement(ct,{forceUpdateProp:t}))})),Cr=n(177),jr=n(178);function xr(){var e=Object(te.a)(["\n    font-size: ","px;\n    line-height: ","px;\n    text-align: center;\n    user-select: none;\n"]);return xr=function(){return e},e}function wr(){var e=Object(te.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return wr=function(){return e},e}function kr(){var e=Object(te.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n    margin-bottom: 8px;\n\n    &:not(:nth-child(3n + 1)) {\n        margin-right: 8px;\n    }\n"]);return kr=function(){return e},e}function Tr(){var e=Object(te.a)(["\n    font-size: 40px;\n    line-height: 40px;\n    user-select: none;\n    z-index: 10;\n"]);return Tr=function(){return e},e}function Ir(){var e=Object(te.a)(["\n    position: absolute;\n    width: calc(100% - 32px);\n    height: 80px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Ir=function(){return e},e}function Ar(){var e=Object(te.a)(["\n    width: 100%;\n    height: 80px;\n    margin-bottom: 16px;\n"]);return Ar=function(){return e},e}function Dr(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: ","px;\n    height: ","px;\n    padding: 16px;\n    padding-bottom: 0;\n\n    display: flex;\n    flex-wrap: wrap;\n"]);return Dr=function(){return e},e}function Nr(){var e=Object(te.a)(["\n    position: relative;\n    width: ","px;\n    height: ","px;\n"]);return Nr=function(){return e},e}var Rr=ne.b.div(Nr(),(function(e){return e.short?"243":"288"}),(function(e){return e.short?"420":"480"})),_r=ne.b.div(Dr(),(function(e){return e.short?"211":"256"}),(function(e){return e.short?"400":"460"})),Hr=ne.b.div(Ar()),Sr=ne.b.div(Ir()),Br=ne.b.div(Tr()),Pr=ne.b.div(kr(),(function(e){return e.short?"65":"80"}),(function(e){return e.short?"65":"80"})),Mr=ne.b.div(wr()),Ur=ne.b.div(xr(),(function(e){return e.short?"30":"40"}),(function(e){return e.short?"30":"40"})),Kr=function(e){var t=e.children,n=e.padding,c=e.color,i=e.onClick,o=e.short,u=Object(r.useState)("white"),l=Object(W.a)(u,2),s=l[0],d=l[1];return a.a.createElement(Pr,{onClick:function(){i&&i(),d("#ccc"),setTimeout((function(){return d("white")}),100)},short:o},a.a.createElement(rt,{forceUpdateProp:o,color:c||"#555",backgroundColor:s}),a.a.createElement(Mr,null,a.a.createElement(Ur,{style:{padding:n},short:o},t)))},Lr=Object(l.b)((function(e){return{encounter:e.encounter||null}}),{updateCustomCharacterHitPoints:A})((function(e){var t=e.short,n=e.encounter,c=e.updateCustomCharacterHitPoints,i=Object(r.useState)(0),o=Object(W.a)(i,2),u=o[0],l=o[1],s=function(e){return function(){return l((function(t){return 10*t+e}))}},d=function(e){return function(){n&&n.selectedEntityKey&&n.customCharacters[n.selectedEntityKey]&&c(n.selectedEntityKey,e*u),l(0)}};return a.a.createElement(Rr,{short:t},a.a.createElement(ct,{forceUpdateProp:t,backgroundColor:"rgba(255, 255, 255, 0.8)"}),a.a.createElement(_r,{short:t},a.a.createElement(Hr,{onClick:function(){return l(0)}},a.a.createElement(Sr,null,a.a.createElement(Br,null,u||""),a.a.createElement(at,{color:"#555",backgroundColor:"white"}))),a.a.createElement(Kr,{short:t,onClick:s(7)},"7"),a.a.createElement(Kr,{short:t,onClick:s(8)},"8"),a.a.createElement(Kr,{short:t,onClick:s(9)},"9"),a.a.createElement(Kr,{short:t,onClick:s(4)},"4"),a.a.createElement(Kr,{short:t,onClick:s(5)},"5"),a.a.createElement(Kr,{short:t,onClick:s(6)},"6"),a.a.createElement(Kr,{short:t,onClick:s(1)},"1"),a.a.createElement(Kr,{short:t,onClick:s(2)},"2"),a.a.createElement(Kr,{short:t,onClick:s(3)},"3"),a.a.createElement(Kr,{short:t,onClick:d(-1),padding:"".concat(t?4:8,"px 0 0 0"),color:"#b13735"},a.a.createElement(Cr.a,{fontSize:t?"default":"large"})),a.a.createElement(Kr,{short:t,onClick:s(0)},"0"),a.a.createElement(Kr,{short:t,onClick:d(1),padding:"".concat(t?4:8,"px 0 0 0"),color:"#08a300"},a.a.createElement(jr.a,{fontSize:t?"default":"large"}))))})),Fr=n(179);function zr(){var e=Object(te.a)(["\n    flex-grow: 1;\n"]);return zr=function(){return e},e}function Yr(){var e=Object(te.a)(["\n    && {\n        padding: 0 12px;\n        min-height: 56px;\n        height: 56px;\n    }\n\n    & > :not(:last-child) {\n        margin-right: 16px;\n    }\n"]);return Yr=function(){return e},e}var Vr=Object(ne.b)(Qn.a)(Yr()),Wr=ne.b.div(zr()),Zr=Object(l.b)(null,{updateBeyondCharacterMaxHp:function(e,t){return{type:"BEYOND_CHARACTER_MAX_HP_UPDATED",payload:{id:e,maxHp:t}}},deleteBeyondCharacter:function(e){return{type:"BEYOND_CHARACTER_DELETED",payload:{id:e}}}})((function(e){var t=e.character,n=e.updateBeyondCharacterMaxHp,c=e.deleteBeyondCharacter,i=Object(r.useState)(t.maxHitPoints.toString()),o=Object(W.a)(i,2),u=o[0],l=o[1],s=Object(r.useState)(!1),d=Object(W.a)(s,2),m=d[0],f=d[1],h=function(){return f(!1)},b=t.name,p=t.avatarUrl;return a.a.createElement(rr.a,{elevation:3,style:{width:"100%",height:"56px"}},a.a.createElement(Vr,null,a.a.createElement(it.a,{variant:"rounded",src:p}),a.a.createElement(sn.a,{variant:"h6"},b),a.a.createElement(Wr,null),a.a.createElement(X.a,{label:"Max HP",type:"number",value:u,onChange:function(e){var r=t.id,a=e.target.value;l(a),n(r,parseInt(a)||0)},style:{width:"64px"}}),a.a.createElement(ln.a,{onClick:function(){return f(!0)}},a.a.createElement(Fr.a,null))),a.a.createElement(mn.a,{open:m,onClose:h},a.a.createElement(hn.a,null,"Are you sure you want to delete ",b,"?"),a.a.createElement(fn.a,null,a.a.createElement(pn.a,null,"This will remove them from your list of saved D&D Beyond characters. You will only be able to undo this by importing this character again.")),a.a.createElement(bn.a,null,a.a.createElement(J.a,{onClick:h,color:"secondary"},"Cancel"),a.a.createElement(J.a,{onClick:function(){var e=t.id;c(e),h()},color:"primary",variant:"contained"},"Delete"))))})),qr=Object(l.b)((function(e){return{characters:e&&e.beyondCharacters||[]}}),{addBeyondCharacterByUrl:D})((function(e){var t=e.characters,n=e.addBeyondCharacterByUrl,c=Object(r.useState)(!1),i=Object(W.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)(""),s=Object(W.a)(l,2),d=s[0],m=s[1],f=Object(r.useState)(""),h=Object(W.a)(f,2),b=h[0],p=h[1],v=function(){return u(!1)};return a.a.createElement(a.a.Fragment,null,t.length>0?t.map((function(e){return a.a.createElement(Zr,{key:e.id,character:e})})):a.a.createElement(sn.a,{variant:"body1"},"Currently you don't have any imported D&D Beyond characters."),a.a.createElement(ee,{title:navigator.onLine?"":"You have to be online to import a new D&D Beyond character"},a.a.createElement("span",null,a.a.createElement(J.a,{variant:"outlined",color:"primary",onClick:function(){return u(!0)},disabled:!navigator.onLine},"Add character"))),a.a.createElement(mn.a,{open:o,onClose:v},a.a.createElement(hn.a,null,"Import new character from D&D Beyond"),a.a.createElement(fn.a,null,a.a.createElement(pn.a,null,'Paste a link to the character you want to add in the input field below. Make sure the character privacy is set to "Public", otherwise it will not be imported.',a.a.createElement("br",null)," ",a.a.createElement("br",null),"Optionally, specify character's maximum hit points. You will be able to change them later."),a.a.createElement(X.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"Character URL",value:d,onChange:function(e){return m(e.target.value)}}),a.a.createElement(X.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:b,onChange:function(e){return p(e.target.value)}})),a.a.createElement(bn.a,null,a.a.createElement(J.a,{onClick:v,color:"secondary"},"Cancel"),a.a.createElement(J.a,{onClick:function(){v(),n(d,parseInt(b)||0),m(""),p("")},color:"primary",variant:"contained",disabled:!d},"Import"))))}));function Gr(){var e=Object(te.a)(["\n    flex-grow: 1;\n"]);return Gr=function(){return e},e}function Xr(){var e=Object(te.a)(["\n    && {\n        padding: 0 12px;\n        min-height: 56px;\n        height: 56px;\n    }\n\n    & > :first-child {\n        margin-right: 16px;\n    }\n"]);return Xr=function(){return e},e}var Jr=Object(ne.b)(Qn.a)(Xr()),$r=ne.b.div(Gr()),Qr=Object(l.b)(null,{updateCustomCharacterSafe:function(e){return function(t,n){var r=n().customCharacters,c=e.originalCharacter,i=e.updatedCharacter;r&&c.name!==i.name&&r.find((function(e){return e.name===i.name}))?t(I(a.a.createElement(a.a.Fragment,null,"Custom character with this name already exists."))):t(U(e))}},deleteCustomCharacter:function(e){return{type:"CUSTOM_CHARACTER_DELETED",payload:e}}})((function(e){var t=e.character,n=e.updateCustomCharacterSafe,c=e.deleteCustomCharacter,i=t.name,o=t.avatarUrl,u=t.maxHitPoints,l=Object(r.useState)(!1),s=Object(W.a)(l,2),d=s[0],m=s[1],f=Object(r.useState)(!1),h=Object(W.a)(f,2),b=h[0],p=h[1],v=Object(r.useState)(i),y=Object(W.a)(v,2),E=y[0],g=y[1],O=Object(r.useState)(u.toString()),C=Object(W.a)(O,2),j=C[0],x=C[1],w=Object(r.useState)(o||""),k=Object(W.a)(w,2),T=k[0],I=k[1],A=function(){return m(!1)},D=function(){return p(!1)};return a.a.createElement(rr.a,{elevation:3,style:{width:"100%",height:"56px"}},a.a.createElement(Jr,null,a.a.createElement(it.a,{variant:"rounded",src:o}),a.a.createElement(sn.a,{variant:"h6"},i),a.a.createElement($r,null),a.a.createElement(ln.a,{onClick:function(){return m(!0)}},a.a.createElement(gn.a,null)),a.a.createElement(ln.a,{onClick:function(){return p(!0)}},a.a.createElement(Fr.a,null))),a.a.createElement(mn.a,{open:d,onClose:A},a.a.createElement(hn.a,null,"Edit ",i),a.a.createElement(fn.a,null,a.a.createElement(pn.a,null,"Change name, max hit points or avatar url of your custom character."),a.a.createElement(X.a,{fullWidth:!0,margin:"dense",label:"Character Name",value:E,onChange:function(e){return g(e.target.value)}}),a.a.createElement(X.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:j,onChange:function(e){return x(e.target.value)}}),a.a.createElement(X.a,{fullWidth:!0,margin:"dense",label:"Avatar URL",value:T,onChange:function(e){return I(e.target.value)}})),a.a.createElement(bn.a,null,a.a.createElement(J.a,{onClick:A,color:"secondary"},"Cancel"),a.a.createElement(J.a,{onClick:function(){n({originalCharacter:t,updatedCharacter:{name:E,avatarUrl:T,maxHitPoints:parseInt(j)||0}}),A()},color:"primary",variant:"contained"},"Save"))),a.a.createElement(mn.a,{open:b,onClose:D},a.a.createElement(hn.a,null,"Are you sure you want to delete ",i,"?"),a.a.createElement(fn.a,null,a.a.createElement(pn.a,null,"This will remove them from your list of saved custom characters. You will only be able to undo this by creating this character again.")),a.a.createElement(bn.a,null,a.a.createElement(J.a,{onClick:D,color:"secondary"},"Cancel"),a.a.createElement(J.a,{onClick:function(){D(),c(t)},color:"primary",variant:"contained"},"Delete"))))}));function ea(){var e=Object(te.a)(["\n    && > {\n        width: 56px;\n        height: 56px;\n    }\n"]);return ea=function(){return e},e}function ta(){var e=Object(te.a)(["\n    margin-top: 16px;\n    border: 2px solid ",";\n    border-radius: 6px;\n    cursor: pointer;\n"]);return ta=function(){return e},e}function na(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return na=function(){return e},e}var ra=ne.b.div(na()),aa=ne.b.div(ta(),(function(e){return e.selected?e.color:"white"})),ca=Object(ne.b)(it.a)(ea()),ia=["".concat("/dnd-combat-tracker","/zombie.png"),"".concat("/dnd-combat-tracker","/skeleton.png"),"".concat("/dnd-combat-tracker","/devil.png"),"".concat("/dnd-combat-tracker","/commoner.png"),"".concat("/dnd-combat-tracker","/wizard.png")],oa=Object(l.b)((function(e){return{characters:e.customCharacters||[]}}),{addCustomCharacterSafe:function(e){return function(t,n){var r=n().customCharacters;r&&r.find((function(t){return t.name===e.name}))?t(I(a.a.createElement(a.a.Fragment,null,"Custom character with this name already exists."))):t(M(e))}}})((function(e){var t=e.characters,n=e.addCustomCharacterSafe,c=Object(Z.a)(),i=Object(r.useState)(!1),o=Object(W.a)(i,2),u=o[0],l=o[1],s=Object(r.useState)(""),d=Object(W.a)(s,2),m=d[0],f=d[1],h=Object(r.useState)(""),b=Object(W.a)(h,2),p=b[0],v=b[1],y=Object(r.useState)(""),E=Object(W.a)(y,2),g=E[0],O=E[1],C=function(){return l(!1)};return a.a.createElement(a.a.Fragment,null,t.length>0?t.map((function(e){return a.a.createElement(Qr,{key:e.name,character:e})})):a.a.createElement(sn.a,{variant:"body1"},"Currently you don't have any saved custom characters."),a.a.createElement(J.a,{variant:"outlined",color:"primary",onClick:function(){return l(!0)}},"Add Character"),a.a.createElement(mn.a,{open:u,onClose:C},a.a.createElement(hn.a,null,"Create new custom character"),a.a.createElement(fn.a,null,a.a.createElement(pn.a,null,"Choose a name for your character and specify maximum hit points. Optionally, specify an avatar URL or pick one of the default avatars.",a.a.createElement("br",null)," ",a.a.createElement("br",null),"It is not possible to have several custom characters with the same name."),a.a.createElement(X.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"Character Name",value:m,onChange:function(e){return f(e.target.value)}}),a.a.createElement(X.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:p,onChange:function(e){return v(e.target.value)}}),a.a.createElement(X.a,{fullWidth:!0,margin:"dense",label:"Avatar URL",value:g,onChange:function(e){return O(e.target.value)}}),a.a.createElement(ra,null,ia.map((function(e){return a.a.createElement(aa,{key:e,onClick:function(){return O(e)},color:c.palette.primary.main,selected:e===g},a.a.createElement(ca,{src:e,variant:"rounded"}))})))),a.a.createElement(bn.a,null,a.a.createElement(J.a,{onClick:C,color:"secondary"},"Cancel"),a.a.createElement(J.a,{onClick:function(){var e=parseInt(p)||0;n({name:m,maxHitPoints:e,avatarUrl:g}),C(),f(""),v(""),O("")},color:"primary",variant:"contained",disabled:!m||!p},"Create"))))}));function ua(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: calc(100% - 24px);\n    height: calc(100% - 32px);\n    margin: 12px 12px 20px 12px;\n"]);return ua=function(){return e},e}function la(){var e=Object(te.a)(["\n    position: relative;\n    width: ",";\n    height: ","px;\n    margin-top: 8px;\n"]);return la=function(){return e},e}var sa=ne.b.div(la(),(function(e){return e.fullWidth?"98vw":"600px"}),(function(e){return 19*parseInt(e.rows)+33})),da=ne.b.div(ua()),ma=Object(l.b)((function(e){return{encounter:e.encounter||null}}),{updateTextNotes:function(e,t){return{type:"ENC_TEXT_NOTES_UPDATED",payload:{key:e,text:t}}}})((function(e){var t=e.rows,n=e.fullWidth,c=e.encounter,i=e.updateTextNotes,o=Object(r.useMemo)((function(){if(!c)return"";var e=c.selectedEntityKey||c.currentTurnKey;return c.textNotesByKey[e]||""}),[c]);return a.a.createElement(sa,{rows:t,fullWidth:n},a.a.createElement(da,null,a.a.createElement(X.a,{multiline:!0,rows:t,style:{width:"100%"},value:o,onChange:function(e){if(c){var t=c.selectedEntityKey||c.currentTurnKey;i(t,e.target.value)}}})),a.a.createElement(rt,{forceUpdateProp:t}))}));function fa(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: center;\n"]);return fa=function(){return e},e}function ha(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n\n    & > :not(:last-child) {\n        margin-right: 32px;\n    }\n"]);return ha=function(){return e},e}function ba(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    max-width: 1200px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    ","\n"]);return ba=function(){return e},e}function pa(){var e=Object(te.a)(["\n    position: absolute;\n    top: 56px;\n    left: 0;\n    width: 100%;\n    height: calc(100% - 64px);\n    display: flex;\n    justify-content: center;\n"]);return pa=function(){return e},e}function va(){var e=Object(te.a)(["\n    position: relative;\n    width: 100%;\n    height: 100%;\n"]);return va=function(){return e},e}var ya=ne.b.div(va()),Ea=ne.b.div(pa()),ga=ne.b.div(ba(),(function(e){return e.small&&"align-items: center;"})),Oa=ne.b.div(ha()),Ca=ne.b.div(fa()),ja=Object(l.b)((function(e){return{isErrorDialogOpen:e.ui&&e.ui.errorDialog.isOpen||!1,errorMessage:e.ui&&e.ui.errorDialog.message,encounter:e.encounter||null,hasBeyondCharacters:!!(e.beyondCharacters&&e.beyondCharacters.length>0)}}),{closeErrorDialog:function(){return{type:"ERROR_DIALOG_CLOSED"}},resetEncounter:function(){return{type:"ENC_RESET"}},createEncounter:function(){return{type:"ENC_CREATED"}},nextTurn:function(){return{type:"ENC_NEXT_TURN"}},prevTurn:function(){return{type:"ENC_PREV_TURN"}}})((function(e){var t=e.isErrorDialogOpen,n=e.errorMessage,c=e.encounter,i=e.hasBeyondCharacters,o=e.closeErrorDialog,u=e.resetEncounter,l=e.createEncounter,s=e.nextTurn,d=e.prevTurn,m=Object(Z.a)(),f=Object(q.a)(m.breakpoints.down("sm")),h=Object(q.a)("(max-height: 830px)"),b=Object(r.useState)(null),p=Object(W.a)(b,2),v=p[0],y=p[1],E=Object(r.useState)(!1),g=Object(W.a)(E,2),O=g[0],C=g[1],j=Object(r.useState)(!1),x=Object(W.a)(j,2),w=x[0],k=x[1],T=Object(r.useState)(!1),I=Object(W.a)(T,2),A=I[0],D=I[1],N=Object(r.useState)(!1),R=Object(W.a)(N,2),_=R[0],H=R[1],S=Object(r.useMemo)((function(){if(!c)return!1;var e=c.beyondCharacters,t=c.customCharacters,n=c.initiativeById,r=Object.keys(e).every((function(e){return Object.keys(n).some((function(t){return e===t}))})),a=Object.keys(t).every((function(e){return Object.keys(n).some((function(t){return e===t}))}));return r&&a&&Object.keys(n).length>0}),[c]),B=Object(r.useMemo)((function(){if(c){var e=c.beyondCharacters[c.currentTurnKey];return e?e.defaultBackdrop.largeBackdropAvatarUrl:void 0}}),[c]),P=function(){return y(null)},M=function(){return C(!1)},U=function(){return k(!1)},K=null!==document.fullscreenElement;return a.a.createElement(ya,null,f?null:a.a.createElement(An,{src:B}),a.a.createElement(nr,null,a.a.createElement(ln.a,{color:"inherit",onClick:function(e){return y(e.currentTarget)}},a.a.createElement(vn.a,null)),c&&c.currentId>1?a.a.createElement(a.a.Fragment,null,a.a.createElement(sn.a,{variant:"h5"},"Round ",c.currentRound),a.a.createElement("div",{style:{flex:"1"}}),a.a.createElement(ee,{title:"Previous turn"},a.a.createElement(ln.a,{color:"inherit",onClick:d},a.a.createElement(yn.a,{style:{transform:"rotateY(180deg)",opacity:"0.7"}}))),a.a.createElement(J.a,{disableElevation:!0,variant:"contained",color:"primary",endIcon:a.a.createElement(yn.a,null),onClick:s},"Next turn")):a.a.createElement(sn.a,{variant:"h5"},"No encounter")),a.a.createElement(G.a,{anchorEl:v,open:!!v,onClose:P},a.a.createElement(dn.a,{onClick:function(){C(!0),P()}},a.a.createElement(En.a,{color:"secondary",style:{marginRight:"16px"}})," Saved characters"),a.a.createElement(dn.a,{onClick:function(){c&&1===c.currentId?D(!0):D(!1),k(!0),P()}},a.a.createElement(gn.a,{color:"secondary",style:{marginRight:"16px"}})," ",c&&1===c.currentId?"Create new encounter":"Edit current encounter"),a.a.createElement(dn.a,{onClick:function(){u(),P()},disabled:!!c&&1===c.currentId},a.a.createElement(On.a,{color:"secondary",style:{marginRight:"16px"}})," Clear current encounter"),a.a.createElement(dn.a,{onClick:function(){!function(){if(null!==document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}}(),P()}},K?a.a.createElement(Cn.a,{color:"secondary",style:{marginRight:"16px"}}):a.a.createElement(jn.a,{color:"secondary",style:{marginRight:"16px"}})," Toggle fullscreen"),f?null:a.a.createElement(dn.a,{onClick:function(){H(!_)}},_?a.a.createElement(xn.a,{color:"secondary",style:{marginRight:"16px"}}):a.a.createElement(wn.a,{color:"secondary",style:{marginRight:"16px"}}),_?"Enable touchscreen mode":"Enable keyboard mode")),a.a.createElement(Ea,null,a.a.createElement(ga,{small:f},c&&c.currentId>1?f?a.a.createElement(a.a.Fragment,null,a.a.createElement(Xn,{fullWidth:!0,fullScreen:K}),a.a.createElement(Ca,null,a.a.createElement(ma,{fullWidth:!0,rows:K?"4":"2"}))):a.a.createElement(a.a.Fragment,null,a.a.createElement(Oa,null,a.a.createElement(Xn,{short:h}),_?null:a.a.createElement(Lr,{short:h})),a.a.createElement(Ca,null,_?a.a.createElement(ma,{rows:"8"}):a.a.createElement(Or,{short:h}))):a.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:"32px"}},a.a.createElement(sn.a,{variant:"h5"},"Create a new encounter to begin")))),a.a.createElement(mn.a,{fullScreen:!0,open:O,onClose:M},a.a.createElement(nr,{color:"primary"},a.a.createElement(ln.a,{color:"inherit",onClick:M},a.a.createElement(kn.a,null)),a.a.createElement(sn.a,{variant:"h6",style:{marginLeft:"8px"}},"Saved Characters")),a.a.createElement(fn.a,null,a.a.createElement(Mn,{titles:i||navigator.onLine?["D&D Beyond Characters","Custom Characters"]:["Custom Characters"],marginBottomOverride:"60"},i||navigator.onLine?a.a.createElement(qr,null):null,a.a.createElement(oa,null)))),a.a.createElement(mn.a,{maxWidth:"lg",fullScreen:f,open:w},f?a.a.createElement(nr,{color:"primary"},a.a.createElement(sn.a,{variant:"h6",style:{marginLeft:"16px"}},A?"New encounter":"Edit encounter")):a.a.createElement(hn.a,null,A?"New encounter":"Edit encounter"),a.a.createElement(fn.a,null,a.a.createElement(Mn,{titles:i?["D&D Beyond Characters","Custom Characters"]:["Custom Characters"]},i?a.a.createElement(br,null):null,a.a.createElement(pr,null))),a.a.createElement(bn.a,null,a.a.createElement(J.a,{color:"secondary",onClick:function(){U(),A&&u()}},"Cancel"),a.a.createElement(J.a,{disabled:!S,variant:"contained",color:"primary",onClick:function(){U(),A&&l()}},"OK"))),a.a.createElement(mn.a,{open:t,onClose:o},a.a.createElement(hn.a,null,"Error"),a.a.createElement(fn.a,null,n?a.a.createElement(pn.a,null,n):null),a.a.createElement(bn.a,null,a.a.createElement(J.a,{variant:"contained",color:"primary",onClick:o},"OK"))))})),xa=Object(o.a)({palette:{primary:{main:"#b13735"},secondary:{main:"#555"}},typography:{fontFamily:"Cairo"},breakpoints:{values:{xs:0,sm:500,md:960,lg:1280,xl:1920}}}),wa=function(){return a.a.createElement(u.a,{theme:xa},a.a.createElement(l.a,{store:Jt},a.a.createElement(s.PersistGate,{loading:a.a.createElement(un,null),persistor:$t},a.a.createElement(ja,null))))},ka=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ta(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(a.a.createElement(wa,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dnd-combat-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dnd-combat-tracker","/service-worker.js");ka?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ta(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ta(t,e)}))}}()}},[[104,1,2]]]);
//# sourceMappingURL=main.f847a3d6.chunk.js.map