(this["webpackJsonpdnd-combat-tracker"]=this["webpackJsonpdnd-combat-tracker"]||[]).push([[0],{104:function(e,n,t){e.exports=t(138)},109:function(e,n,t){},138:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(12),i=t.n(c),o=(t(109),t(93)),l=t(188),u=t(16),s=t(80),d=t(26),m=t(81),f=t(58),b=t(82),h=t.n(b),p=t(83),v=t.n(p),E=t(14),g=t(13),O=t(57),y=t.n(O),j=t(85),C=t(86),x=t.n(C),w=function(){var e=Object(j.a)(y.a.mark((function e(n){var t,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.characterId,a="https://www.dndbeyond.com/character/".concat(t,"/json"),e.next=4,x()({method:"GET",url:a,withCredentials:!1});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=t(164),I=function(e){if(e.response)switch(e.response.status){case 404:return r.a.createElement(r.a.Fragment,null,'Invalid character URL, page not found. Make sure that the ID is correct and that character privacy is set to "Public".',r.a.createElement("br",null),r.a.createElement("br",null),"Error message: ",e.message);case 403:return r.a.createElement(r.a.Fragment,null,"D&D Beyond blocked a request because it thinks I'm a robot. Opening ",r.a.createElement(k.a,{href:"https://www.dndbeyond.com/"},"dndbeyond.com")," in Incognito mode and passing the captcha there usually helps.",r.a.createElement("br",null),r.a.createElement("br",null),"Error message: ",e.message);default:return r.a.createElement(r.a.Fragment,null,"Request was unsuccessful. Most likely your browser is blocking Cross-Origin requests (CORS). Make sure you have a CORS-allowing extension installed or disable D&D Beyond integration in settings.",r.a.createElement("br",null),r.a.createElement("br",null),"Error message: ",e.message)}return r.a.createElement(r.a.Fragment,null,"Request was unsuccessful. Most likely your browser is blocking Cross-Origin requests (CORS). Make sure you have a CORS-allowing extension installed or disable D&D Beyond integration in settings.",r.a.createElement("br",null),r.a.createElement("br",null),"Error message: ",e.message)},P=function(e){return{type:"ERROR_DIALOG_OPENED",payload:e}},A=function(e,n){return function(t,a){var r=e.split("/")[e.split("/").length-1],c=a().characters;c&&c.every((function(e){return e.id.toString()!==r}))?w({characterId:r}).then((function(e){var a=e.id,r=e.name,c=e.removedHitPoints,i=e.temporaryHitPoints,o=e.deathSaves,l=e.avatarUrl,u=e.themeColor,s=e.defaultBackdrop;t(D({id:a,name:r,maxHitPoints:n,removedHitPoints:c,temporaryHitPoints:i,deathSaves:o,avatarUrl:l,themeColor:u,defaultBackdrop:s}))}),(function(e){return t(P(I(e)))})):t(N(parseInt(r),n))}},N=function(e,n){return function(t,a){var r=a().characters;r&&(r.find((function(n){return n.id===e}))?w({characterId:e.toString()}).then((function(e){var a=e.id,r=e.name,c=e.removedHitPoints,i=e.temporaryHitPoints,o=e.deathSaves,l=e.avatarUrl,u=e.themeColor,s=e.defaultBackdrop;t(R(a,{id:a,name:r,maxHitPoints:n,removedHitPoints:c,temporaryHitPoints:i,deathSaves:o,avatarUrl:l,themeColor:u,defaultBackdrop:s}))}),(function(e){return t(P(I(e)))})):t(A(e.toString(),n)))}},D=function(e){return{type:"CHARACTER_ADDED",payload:e}},R=function(e,n){return{type:"CHARACTER_UPDATED",payload:{id:e,character:n}}},H=[],S=function(e,n){var t=n.payload,a=t.id,r=t.character,c=e.find((function(e){return e.id===a}));if(c){var i=e.indexOf(c);return[].concat(Object(g.a)(e.slice(0,i)),[r],Object(g.a)(e.slice(i+1)))}return[].concat(Object(g.a)(e),[r])},T=function(e,n){var t=n.payload,a=t.id,r=t.maxHp,c=e.find((function(e){return e.id===a}));if(c){var i=e.indexOf(c);return[].concat(Object(g.a)(e.slice(0,i)),[Object(E.a)({},c,{maxHitPoints:r})],Object(g.a)(e.slice(i+1)))}return Object(g.a)(e)},_=function(e,n){var t=n.payload.id,a=e.find((function(e){return e.id===t}));if(a){var r=e.indexOf(a);return[].concat(Object(g.a)(e.slice(0,r)),Object(g.a)(e.slice(r+1)))}return Object(g.a)(e)},B=function(e){return{type:"NPC_ADDED",payload:e}},L=function(e){return{type:"NPC_UPDATED",payload:e}},M=[],V=function(e,n){var t=n.payload,a=e.indexOf(t);return-1!==a?[].concat(Object(g.a)(e.slice(0,a)),Object(g.a)(e.slice(a+1))):Object(g.a)(e)},z=function(e,n){var t=n.payload,a=t.originalNPC,r=t.updatedNPC,c=e.indexOf(a);return-1!==c?[].concat(Object(g.a)(e.slice(0,c)),[r],Object(g.a)(e.slice(c+1))):Object(g.a)(e)},U={errorDialog:{isOpen:!1}},F=t(11),W=t(18),Z={characters:{},npcs:{},initiativeById:{},currentId:0},G=function(e,n){var t=e.characters,a=n.payload.name,r=Object(W.filter)((function(e){return t[parseInt(e)].name.startsWith(a)}),Object(W.keys)(t)).length;return 0===r?Object(E.a)({},e,{characters:Object(E.a)({},e.characters,Object(F.a)({},e.currentId,n.payload)),currentId:e.currentId+1}):Object(E.a)({},e,{characters:Object(E.a)({},e.characters,Object(F.a)({},e.currentId,Object(E.a)({},n.payload,{name:"".concat(a," #").concat(r+1)}))),currentId:e.currentId+1})},Y=function(e,n){var t=e.npcs,a=n.payload.name,r=Object(W.filter)((function(e){return t[parseInt(e)].name.startsWith(a)}),Object(W.keys)(t)).length;return 0===r?Object(E.a)({},e,{npcs:Object(E.a)({},e.npcs,Object(F.a)({},e.currentId,n.payload)),currentId:e.currentId+1}):Object(E.a)({},e,{npcs:Object(E.a)({},e.npcs,Object(F.a)({},e.currentId,Object(E.a)({},n.payload,{name:"".concat(a," #").concat(r+1)}))),currentId:e.currentId+1})},q=function(e,n){var t=Object(W.findKey)((function(e){return e.id===n.payload.id}),e.characters);return t?Object(E.a)({},e,{characters:Object(W.omit)(t,e.characters),initiativeById:Object(W.omit)(t,e.initiativeById)}):e},X=function(e,n){var t=e.npcs,a=n.payload.name,r=Object(W.filter)((function(e){return t[parseInt(e)].name.startsWith(a)}),Object(W.keys)(t));if(0===r.length)return e;var c=Object(W.reduce)((function(e,n){var r=parseInt(n),c=t[r];if(c.name===a)return e.number<1?{key:r,number:1}:e;var i=c.name.slice(a.length).split("#"),o=parseInt(i[i.length-1]);return o>e.number?{key:r,number:o}:e}),{key:0,number:-1},r);return Object(E.a)({},e,{npcs:Object(W.omit)(c.key,t)})},K=function(e,n){var t=e.characters,a=e.initiativeById,r=n.payload,c=r.character,i=r.initiative,o=Object(W.keys)(t).find((function(e){return t[parseInt(e)].id===c.id}));return o?Object(E.a)({},e,{initiativeById:Object(E.a)({},a,Object(F.a)({},o,i))}):e},J=function(e,n){var t=e.npcs,a=e.initiativeById,r=n.payload,c=r.npc,i=r.initiative,o=Object(W.keys)(t).filter((function(e){return t[parseInt(e)].name.startsWith(c.name)}));if(0===o.length)return e;var l={};return o.forEach((function(e){return l[parseInt(e)]=i})),Object(E.a)({},e,{initiativeById:Object(E.a)({},a,{},l)})},$=Object(d.c)({characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CHARACTER_ADDED":return[].concat(Object(g.a)(e),[n.payload]);case"CHARACTER_UPDATED":return S(e,n);case"CHARACTER_MAX_HP_UPDATED":return T(e,n);case"CHARACTER_DELETED":return _(e,n);case"CHARACTER_ALREADY_EXISTS":case"CHARACTER_FETCH_FAILED":default:return e}},npcs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"NPC_ADDED":return[].concat(Object(g.a)(e),[n.payload]);case"NPC_DELETED":return V(e,n);case"NPC_UPDATED":return z(e,n);default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ERROR_DIALOG_OPENED":return e.errorDialog.isOpen?e:Object(E.a)({},e,{errorDialog:{isOpen:!0,message:n.payload}});case"ERROR_DIALOG_CLOSED":return Object(E.a)({},e,{errorDialog:{isOpen:!1,message:e.errorDialog.message}});default:return e}},encounter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ENC_CHARACTER_ADDED":return G(e,n);case"ENC_NPC_ADDED":return Y(e,n);case"ENC_CHARACTER_REMOVED":return q(e,n);case"ENC_NPC_REMOVED":return X(e,n);case"ENC_CHARACTER_INITIATIVE_UPDATED":return K(e,n);case"ENC_NPC_INITIATIVE_UPDATED":return J(e,n);case"ENC_RESET":return Z;default:return e}}}),Q={key:"root",storage:h.a,stateReconciler:v.a,blacklist:["ui"]},ee=Object(d.d)(Object(f.a)(Q,$),Object(d.a)(m.a)),ne=Object(f.b)(ee),te=t(4),ae=t(5);function re(){var e=Object(te.a)(["\n    font-family: 'Yeon Sung';\n    font-size: 40px;\n    line-height: 40px;\n    color: orange;\n"]);return re=function(){return e},e}function ce(){var e=Object(te.a)(["\n    width: 400px;\n    max-width: 80%;\n"]);return ce=function(){return e},e}function ie(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]);return ie=function(){return e},e}function oe(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    background-color: #666666;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return oe=function(){return e},e}var le=ae.b.div(oe()),ue=ae.b.div(ie()),se=ae.b.img(ce()),de=ae.b.div(re()),me=function(){return r.a.createElement(le,null,r.a.createElement(ue,null,r.a.createElement(se,{src:"".concat("/dnd-combat-tracker","/fire.gif")}),r.a.createElement(de,null,"Loading")))},fe=t(9),be=t(174),he=t(94),pe=t(195),ve=t(192),Ee=t(59),ge=t(176),Oe=t(177),ye=t(179),je=t(180),Ce=t(178),xe=t(184),we=t(185),ke=t(181),Ie=t(186),Pe=t(187),Ae=t(2),Ne=t(167),De=t(168);function Re(){var e=Object(te.a)(["\n    width: 100%;\n    flex-grow: 1;\n"]);return Re=function(){return e},e}var He=ae.b.div(Re()),Se=function(e){var n=e.children,t=Object(Ae.a)(e,["children"]);return r.a.createElement(He,null,r.a.createElement(Ne.a,Object.assign({position:"relative",color:"secondary",style:{minHeight:"56px"}},t),r.a.createElement(De.a,{style:{minHeight:"56px"}},n)))},Te=t(193),_e=t(6),Be=Object(_e.a)((function(e){return{tooltip:{fontSize:16,backgroundColor:e.palette.secondary.main},arrow:{color:e.palette.secondary.main}}}))((function(e){return r.a.createElement(Te.a,Object.assign({arrow:!0},e))}));function Le(){var e=Object(te.a)(["\n    width: ","px;\n    transform: rotate(180deg);\n"]);return Le=function(){return e},e}function Me(){var e=Object(te.a)(["\n    width: ","px;\n"]);return Me=function(){return e},e}function Ve(){var e=Object(te.a)(["\n    height: ","px;\n    transform: rotate(180deg);\n"]);return Ve=function(){return e},e}function ze(){var e=Object(te.a)(["\n    height: ","px;\n"]);return ze=function(){return e},e}function Ue(){var e=Object(te.a)(["\n    ","\n    transform: rotate(180deg);\n"]);return Ue=function(){return e},e}function Fe(){var e=Object(te.a)(["\n    ","\n    transform: rotateY(180deg);\n    transform: rotateX(180deg);\n"]);return Fe=function(){return e},e}function We(){var e=Object(te.a)(["\n    ","\n    transform: rotateY(180deg);\n"]);return We=function(){return e},e}function Ze(){var e=Object(te.a)(["\n    ","\n"]);return Ze=function(){return e},e}function Ge(){var e=Object(te.a)(["\n    width: ","px;\n    height: ","px;\n"]);return Ge=function(){return e},e}function Ye(){var e=Object(te.a)(["\n    width: ","px;\n    height: ","px;\n    ","\n    transition: background-color 0.3s;\n"]);return Ye=function(){return e},e}function qe(){var e=Object(te.a)(["\n    display: flex;\n"]);return qe=function(){return e},e}function Xe(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Xe=function(){return e},e}function Ke(){var e=Object(te.a)(["\n    display: flex;\n"]);return Ke=function(){return e},e}function Je(){var e=Object(te.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n    pointer-events: none;\n"]);return Je=function(){return e},e}var $e=ae.b.div(Je()),Qe=ae.b.div(Ke()),en=ae.b.div(Xe()),nn=ae.b.div(qe()),tn=ae.b.div(Ye(),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.backgroundColor&&"background-color: ".concat(e.backgroundColor,";")})),an=Object(ae.a)(Ge(),(function(e){return e.width}),(function(e){return e.height})),rn=Object(ae.a)(Ze(),an),cn=Object(ae.a)(We(),an),on=Object(ae.a)(Fe(),an),ln=Object(ae.a)(Ue(),an),un=Object(ae.a)(ze(),(function(e){return e.height})),sn=Object(ae.a)(Ve(),(function(e){return e.height})),dn=Object(ae.a)(Me(),(function(e){return e.width})),mn=Object(ae.a)(Le(),(function(e){return e.width})),fn=function(e){return function(n){var t=n.color,a=n.backgroundColor,c=n.width,i=n.height,o=n.className;return r.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},a?r.a.createElement("path",{style:{fill:a,zIndex:-1,transition:"fill 0.3s"},transform:e,d:"M615.2,646.2c-1.7,5.7-12.9,11.7-14.5,11.7H22.5c-1.7,0-12.8-6-14.5-11.7L8.2,19.3V12S16.1,2.3,23.4,1.4H599.80005c7.3.8,15.1,10.6,15.1,10.6v7.3Z"}):null,r.a.createElement("path",{style:{fill:t,zIndex:2,boxShadow:"0 0 20px grey"},transform:e,d:"M611.9,0H11L0,11.5v637L11,660H612l11-11.5V11.5ZM3,12.8l9.2-9.6h5.9A25.8384,25.8384,0,0,0,7,12.9H6.9v.2A36.38553,36.38553,0,0,0,3,21.7ZM3,26.9A42.92655,42.92655,0,0,1,6.9,15.7V644.3a13.90069,13.90069,0,0,1-1.1-2.1,51.50646,51.50646,0,0,1-2.9-9L3,26.9Zm9.2,629.9L3,647.2v-8.9a40.90524,40.90524,0,0,0,3.9,8.6v.2H7a24.86426,24.86426,0,0,0,11.1,9.8H12.2Zm10.1,0A22.56646,22.56646,0,0,1,8.6,647V13A23.74954,23.74954,0,0,1,22.4,3.1H600.6a22.56647,22.56647,0,0,1,13.7,9.8v634a23.74956,23.74956,0,0,1-13.8,9.9Zm597.6-9.6-9.2,9.6h-5.9a24.86437,24.86437,0,0,0,11.1-9.8h.1v-.2a36.38635,36.38635,0,0,0,3.9-8.6l.00006,9Zm0-14.1a41.717,41.717,0,0,1-3.9,11.2V15.7a13.89825,13.89825,0,0,1,1.1,2.1,51.50837,51.50837,0,0,1,2.9,9l-.1,606.3Zm0-611.4a40.9054,40.9054,0,0,0-3.9-8.6v-.2h-.1a24.86433,24.86433,0,0,0-11.1-9.8h5.9l9.2,9.6-.00007,9Z"}))}},bn=fn(),hn=fn("translate(0,-32)"),pn=function(e){return function(n){var t=n.color,a=n.backgroundColor,c=n.width,i=n.height,o=n.className;return r.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},a?r.a.createElement("polygon",{fill:a,style:{zIndex:-2},transform:e,points:"8 93 337 93 337 2 8 2 8 93"}):null,r.a.createElement("path",{fill:t,transform:e,d:"M344,6.39V4.47h-6.14V0h-2.68s-1.06,1.54-3.91,1.54H12.73C9.88,1.54,8.82,0,8.82,0H6.14V4.47H0V6.39c2.53,0,2.67,4.14,2.67,4.14V81.91S2.53,86,0,86v2H6.14v7H8.82V3.31H335.18V91.69H8.82V95s1.06-1.54,3.91-1.54H331.27c2.84,0,3.9,1.52,3.91,1.54h2.68V88H344V86c-2.53,0-2.67-4.13-2.67-4.13V10.53S341.47,6.39,344,6.39ZM6.27,81.91H4.14V12.12H6.27Zm333.79.48h-2.12V12.61h2.12Z"}))}},vn=pn(),En=pn("translate(-32,0)"),gn=pn("translate(0,-32)"),On=function(e){return function(n){var t=n.color,a=n.backgroundColor,c=n.width,i=n.height,o=n.className;return r.a.createElement("svg",{className:o,"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c," ").concat(i)},a?r.a.createElement("path",{style:{fill:a,zIndex:-1,transition:"fill 0.3s"},transform:e,d:"M275.08,719a32.47,32.47,0,0,0-1.23-4.29c-1.71-4.36-1.13-582.66-1.13-582.66s0-30.43-.58-49c-.36-11.85,1.72-26.54,3.28-35.6a4,4,0,0,1-1.49-1.64c-1.7-3.61-2.41-7.49-1-11.35a6.27,6.27,0,0,1,.93-1.69c-.7-3.15-.33-6.48-1.3-9.54a42.76,42.76,0,0,0-3.54-7,18.66,18.66,0,0,0-5-6.37c-2-1.48-4.08-2.5-5.8-4.27-1.74-.72-3.49-1.42-5.2-2.21l-.4-.21H29.41a5.1,5.1,0,0,1-3.58,1.27,5.83,5.83,0,0,1-2.25,1.44L23.19,6,23,6.05c-.42.25-.87.47-1.29.74a7.34,7.34,0,0,0-1.22.84c1-.91-.26.24-.45.41a5.85,5.85,0,0,1-2.83,1.33,52.05,52.05,0,0,0-3.9,4c-4.59,5.47-4.83,13.51-6.24,20.2,0,.14-.08.27-.11.4a11.08,11.08,0,0,1,.29,1.52c-.16-1.2.09.35.14.59q.14.63.3,1.26a21,21,0,0,0,.88,2.57c1.07,2.59-1.17,5.4-3.49,6.15a3.22,3.22,0,0,1-.7.14C5.94,55.14,8.24,70.62,7.86,83c-.58,18.57-.58,49-.58,49s.64,576.13-1,587.33a5.14,5.14,0,0,1,3.07,6,29.15,29.15,0,0,1-2.67,7,4.68,4.68,0,0,1,.85,2.91c-.27,14.38,12.13,22.59,23.77,28.18a5.7,5.7,0,0,1,.88.53h216.9a5.09,5.09,0,0,1,2.84-1.08,4.1,4.1,0,0,1,1.59-1.45c1-.5,2.07-.93,3.12-1.37l.64-.27-.55.24a6.87,6.87,0,0,0,1.29-.6c.22-.11.45-.18.68-.27,1-1,1.86-1.92,2.41-2.37,2.91-2.43,6.23-4.26,7.86-7.81a4.38,4.38,0,0,1,1.74-2c.81-4.9,2.13-9.72,2.58-14.7a5.32,5.32,0,0,1,.57-2c0-.19-.07-.36-.11-.51-.38-1.74-.87-3.44-1.28-5.17A4.8,4.8,0,0,1,275.08,719Z"}):null,r.a.createElement("path",{style:{fill:t,zIndex:2,boxShadow:"0 0 20px grey"},transform:e,d:"M275.28,654.52v-554c.77-12.76,2.64-38.62,5.52-48.14l.21-.69-.6-.38a21.36,21.36,0,0,1-3.68-3.14,62.8,62.8,0,0,1,2.34-9.56l.12-.34L276.7,10.17l-1.08-.34c-2.52-.8-9.71-4-9.71-8.12V0H15.09V1.71c0,4.13-7,7.26-9.71,8.12l-1.08.34L1.82,38.28l.12.34a64,64,0,0,1,2.34,9.54A21,21,0,0,1,.6,51.32L0,51.7l.21.69C3.09,61.89,5,87.7,5.72,100.48v554C5,667.23,3.09,703.1.21,712.61L0,713.3l.6.38a20.83,20.83,0,0,1,3.68,3.14,61.64,61.64,0,0,1-2.34,9.56l-.12.35,2.48,28.1,1.08.34c2.7.86,9.71,4,9.71,8.12V765H265.91v-1.71c0-4.13,7-7.26,9.71-8.12l1.08-.34,2.48-28.1-.12-.35a64,64,0,0,1-2.34-9.54,21,21,0,0,1,3.68-3.16l.6-.38-.21-.69c-2.88-9.5-4.74-45.31-5.51-58.09m-3.84,73.29s.45,1.07,1,2.61a29.79,29.79,0,0,1-1.33,12.42C268.18,751.6,261,758,250.25,761.58H30.68c-23-7.63-22.8-25.7-22.16-31.09.59-1.63,1.06-2.75,1.09-2.83a12.21,12.21,0,0,0-2.1-9.76c3.38-18.83,1.66-42.81,1.58-43.89V91.12c.09-1.19,1.81-25.21-1.57-44.05a12.41,12.41,0,0,0,2.05-9.88s-.45-1.07-1-2.61A29.8,29.8,0,0,1,9.87,22.16C12.82,13.4,20,7,30.76,3.42H250.32c23.05,7.63,22.8,25.7,22.16,31.09-.59,1.63-1.06,2.75-1.09,2.84a12.19,12.19,0,0,0,2.1,9.75c-3.38,18.83-1.66,42.81-1.58,43.89V673.88c-.09,1.19-1.81,25.21,1.57,44a12.41,12.41,0,0,0-2.05,9.88m7.41-675.3c-1.71,6.15-3,17.57-4,28.45a191.48,191.48,0,0,1,1.5-30.51,23.59,23.59,0,0,0,2.5,2.06m-5.72-14.58c.09-.21,1.13-2.72,2.12-5.82l.51,5.74A61.16,61.16,0,0,0,274,44.4a9.5,9.5,0,0,1-.89-6.47m.42-25.21,1.24,14.07c-.25,1.21-.59,2.48-1,3.69a30.1,30.1,0,0,0-1.55-8.72c-2-6-6.88-13.57-18.42-18.34h8.89c1.25,5.24,8,8.26,10.8,9.3M18.25,3.42h8.88C10.49,10.29,7.46,23.17,7.21,30.61c-.38-1.25-.74-2.56-1-3.82L7.45,12.72c2.79-1,9.55-4.06,10.8-9.3m-13,34.43.51-5.74c1,3.07,2,5.53,2.07,5.66A9.73,9.73,0,0,1,7,44.33a62.24,62.24,0,0,0-1.73-6.48m-.6,12.59A191.42,191.42,0,0,1,6.15,81c-1-10.87-2.29-22.29-4-28.44a21.9,21.9,0,0,0,2.49-2.07M2.15,712.49c1.71-6.15,3-17.57,4-28.44a191.41,191.41,0,0,1-1.5,30.5,23.59,23.59,0,0,0-2.5-2.06m5.72,14.58c-.09.21-1.13,2.72-2.12,5.82l-.51-5.74A60.54,60.54,0,0,0,7,720.6a9.5,9.5,0,0,1,.89,6.47m-.42,25.21L6.21,738.21c.25-1.21.59-2.47,1-3.69a30,30,0,0,0,1.55,8.72c2,6,6.88,13.57,18.42,18.34H18.25c-1.25-5.24-8-8.26-10.8-9.3m255.3,9.3h-8.88c16.64-6.86,19.67-19.75,19.92-27.19.38,1.26.74,2.56,1,3.82l-1.24,14.07c-2.79,1-9.55,4.06-10.8,9.3m13-34.43-.51,5.74c-1-3.08-2-5.53-2.07-5.66a9.73,9.73,0,0,1,.85-6.56,62.24,62.24,0,0,0,1.73,6.48m.6-12.59a191.37,191.37,0,0,1-1.51-30.51c1,10.88,2.29,22.29,4,28.44a21.9,21.9,0,0,0-2.49,2.07"}))}},yn=On(),jn=On("translate(0,-100)");function Cn(){var e=Object(te.a)(["",""]);return Cn=function(){return e},e}function xn(){var e=Object(te.a)(["",""]);return xn=function(){return e},e}function wn(){var e=Object(te.a)(["",""]);return wn=function(){return e},e}function kn(){var e=Object(te.a)(["",""]);return kn=function(){return e},e}function In(){var e=Object(te.a)(["",""]);return In=function(){return e},e}function Pn(){var e=Object(te.a)(["",""]);return Pn=function(){return e},e}function An(){var e=Object(te.a)(["",""]);return An=function(){return e},e}function Nn(){var e=Object(te.a)(["",""]);return Nn=function(){return e},e}var Dn=function(e){var n=e.partSize,t=e.Corner,c=e.Top,i=e.Side,o=Object(ae.b)(t)(Nn(),rn),l=Object(ae.b)(t)(An(),cn),u=Object(ae.b)(t)(Pn(),on),s=Object(ae.b)(t)(In(),ln),d=Object(ae.b)(c)(kn(),un),m=Object(ae.b)(c)(wn(),sn),f=Object(ae.b)(i)(xn(),dn),b=Object(ae.b)(i)(Cn(),mn);return function(e){var t=e.color,c=void 0===t?"#b13735":t,i=e.backgroundColor,h=e.className,p=Object(a.useRef)(null),v=Object(a.useState)(n),E=Object(fe.a)(v,2),g=E[0],O=E[1],y=Object(a.useState)(n),j=Object(fe.a)(y,2),C=j[0],x=j[1];Object(a.useEffect)((function(){return window.addEventListener("resize",w),function(){return window.removeEventListener("resize",w)}}),[]),Object(a.useEffect)((function(){w()}),[p]);var w=function(){var e=p.current;e&&(O(e.clientWidth-2*n),x(e.clientHeight-2*n))},k={color:c,backgroundColor:i,width:n,height:n};return r.a.createElement($e,{ref:p,className:h},p.current?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe,null,r.a.createElement(o,k),r.a.createElement(d,Object.assign({},k,{width:g})),r.a.createElement(l,k)),r.a.createElement(en,null,r.a.createElement(f,Object.assign({},k,{height:C})),r.a.createElement(tn,Object.assign({},k,{height:C,width:g})),r.a.createElement(b,Object.assign({},k,{height:C}))),r.a.createElement(nn,null,r.a.createElement(u,k),r.a.createElement(m,Object.assign({},k,{width:g})),r.a.createElement(s,k))):null)}},Rn=Dn({partSize:32,Corner:bn,Top:function(e){var n=e.color,t=e.backgroundColor,a=e.width,c=e.height,i=e.className;return r.a.createElement("div",{className:i,style:{backgroundColor:t,width:a,height:c,borderTop:"3px solid ".concat(n),boxSizing:"border-box",transition:"background-color 0.3s"}})},Side:hn}),Hn=Dn({partSize:32,Corner:vn,Top:En,Side:gn}),Sn=Dn({partSize:128,Corner:yn,Top:function(e){var n=e.color,t=e.backgroundColor,a=e.width,c=e.height,i=e.className;return r.a.createElement("div",{className:i,style:{backgroundColor:t,width:a,height:c,borderTop:"3.5px solid ".concat(n),boxSizing:"border-box"}})},Side:jn}),Tn=t(194);function _n(){var e=Object(te.a)(["\n    font-size: 32px;\n    line-height: 32px;\n    width: ","px;\n    text-align: center;\n"]);return _n=function(){return e},e}function Bn(){var e=Object(te.a)(["\n    height: 64px;\n    width: 200px;\n    margin-left: auto;\n    margin-right: 16px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n"]);return Bn=function(){return e},e}function Ln(){var e=Object(te.a)(["\n    height: 20px;\n    width: 100%;\n"]);return Ln=function(){return e},e}function Mn(){var e=Object(te.a)(["\n    font-size: 24px;\n    line-height: 24px;\n"]);return Mn=function(){return e},e}function Vn(){var e=Object(te.a)(["\n    height: 64px;\n    margin-right: 8px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: flex-start;\n"]);return Vn=function(){return e},e}function zn(){var e=Object(te.a)(["\n    && {\n        height: 60px;\n        width: 60px;\n    }\n    margin: 0 8px;\n"]);return zn=function(){return e},e}function Un(){var e=Object(te.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 8px;\n    display: flex;\n    align-items: center;\n    box-sizing: border-box;\n"]);return Un=function(){return e},e}function Fn(){var e=Object(te.a)(["\n    position: relative;\n    height: 100%;\n    border-radius: 20px;\n"]);return Fn=function(){return e},e}function Wn(){var e=Object(te.a)(["\n    height: 80px;\n\n    &:not(:last-child) {\n        margin-bottom: 8px;\n    }\n"]);return Wn=function(){return e},e}var Zn,Gn=ae.b.div(Wn()),Yn=ae.b.div(Fn()),qn=ae.b.div(Un()),Xn=Object(ae.b)(Tn.a)(zn()),Kn=ae.b.div(Vn()),Jn=ae.b.div(Mn()),$n=ae.b.div(Ln()),Qn=ae.b.div(Bn()),et=ae.b.div(_n(),(function(e){return e.width})),nt=t(27);!function(e){e.CHARACTER="CHARACTER",e.NPC="NPC"}(Zn||(Zn={}));var tt=Object(u.b)(null,{updateCharacterById:N})((function(e){var n=e.id,t=e.type,c=e.name,i=e.maxHitPoints,o=e.removedHitPoints,l=void 0===o?0:o,u=e.temporaryHitPoints,s=void 0===u?0:u,d=(e.deathSaves,e.avatarUrl),m=e.color,f=e.updateCharacterById,b=Object(nt.a)();return Object(a.useEffect)((function(){t===Zn.CHARACTER&&n&&f(n,i)}),[t,n,i,f]),r.a.createElement(Gn,null,r.a.createElement(Yn,null,r.a.createElement(Rn,{color:t===Zn.CHARACTER?m:b.palette.secondary.main,backgroundColor:"white"}),r.a.createElement(qn,null,r.a.createElement(Xn,{src:d,variant:"rounded"}),r.a.createElement(Kn,null,r.a.createElement(Jn,null,c),r.a.createElement($n,null)),r.a.createElement(Qn,null,r.a.createElement(et,{width:64},i-l),r.a.createElement(et,{width:16,style:{color:"grey"}},"/"),r.a.createElement(et,{width:64},i),r.a.createElement(et,{width:48,style:{color:"grey"}},"[",s,"]")))))}));function at(){var e=Object(te.a)(["\n    ","\n    bottom: 0;\n    background: linear-gradient(transparent, white);\n"]);return at=function(){return e},e}function rt(){var e=Object(te.a)(["\n    ","\n    top: 0;\n    background: linear-gradient(white, transparent);\n"]);return rt=function(){return e},e}function ct(){var e=Object(te.a)(["\n    position: absolute;\n    left: calc(2%);\n    width: 96%;\n    border-radius: 16px;\n    height: 20px;\n"]);return ct=function(){return e},e}function it(){var e=Object(te.a)(["\n    height: 448px;\n    padding: 16px;\n\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n\n    overflow-y: scroll;\n\n    &::-webkit-scrollbar {\n        display: none;\n    }\n"]);return it=function(){return e},e}function ot(){var e=Object(te.a)(["\n    position: relative;\n    width: 50%;\n    max-width: 600px;\n    height: 480px;\n"]);return ot=function(){return e},e}var lt=ae.b.div(ot()),ut=ae.b.div(it()),st=Object(ae.a)(ct()),dt=ae.b.div(rt(),st),mt=ae.b.div(at(),st),ft=Object(u.b)((function(e){return{characters:e.characters||[],npcs:e.npcs||[],encounter:e.encounter||null}}))((function(e){var n=e.encounter,t=Object(a.useMemo)((function(){var e=[];if(!n)return e;var t=n.characters,a=n.npcs,r=n.initiativeById;return Object(W.keys)(t).forEach((function(n){var a=parseInt(n),c=r[a];e.push({initiative:c,type:Zn.CHARACTER,entity:t[a],key:a})})),Object(W.keys)(a).forEach((function(n){var t=parseInt(n),c=r[t];e.push({initiative:c,type:Zn.NPC,entity:a[t],key:t})})),e.sort((function(e,n){return e.initiative<n.initiative?1:e.initiative>n.initiative?-1:0}))}),[n]);return r.a.createElement(lt,null,r.a.createElement(ut,null,t.map((function(e){e.initiative;var n=e.type,t=e.entity,a=e.key,c=Object(E.a)({key:a,type:n},t);if(n===Zn.NPC){c=Object(E.a)({},c,{removedHitPoints:1,temporaryHitPoints:10})}return r.a.createElement(tt,c)}))),r.a.createElement(dt,null),r.a.createElement(mt,null),r.a.createElement(Sn,null))}));function bt(){var e=Object(te.a)(["\n    font-size: 40px;\n    line-height: 40px;\n    text-align: center;\n    user-select: none;\n"]);return bt=function(){return e},e}function ht(){var e=Object(te.a)(["\n    position: absolute;\n    width: 80px;\n    height: 80px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return ht=function(){return e},e}function pt(){var e=Object(te.a)(["\n    position: relative;\n    width: 80px;\n    height: 80px;\n    margin-bottom: 8px;\n\n    &:not(:nth-child(3n + 1)) {\n        margin-right: 8px;\n    }\n"]);return pt=function(){return e},e}function vt(){var e=Object(te.a)(["\n    font-size: 40px;\n    line-height: 40px;\n    user-select: none;\n    z-index: 10;\n"]);return vt=function(){return e},e}function Et(){var e=Object(te.a)(["\n    position: absolute;\n    width: 256px;\n    height: 80px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return Et=function(){return e},e}function gt(){var e=Object(te.a)(["\n    width: 256px;\n    height: 80px;\n    margin-bottom: 16px;\n"]);return gt=function(){return e},e}function Ot(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 256px;\n    height: 460px;\n    padding: 16px;\n    padding-bottom: 0;\n\n    display: flex;\n    flex-wrap: wrap;\n"]);return Ot=function(){return e},e}function yt(){var e=Object(te.a)(["\n    position: relative;\n    width: 288px;\n    height: 480px;\n"]);return yt=function(){return e},e}var jt=ae.b.div(yt()),Ct=ae.b.div(Ot()),xt=ae.b.div(gt()),wt=ae.b.div(Et()),kt=ae.b.div(vt()),It=ae.b.div(pt()),Pt=ae.b.div(ht()),At=ae.b.div(bt()),Nt=t(171),Dt=t(172),Rt=function(e){var n=e.children,t=e.padding,c=e.color,i=e.onClick,o=Object(a.useState)("white"),l=Object(fe.a)(o,2),u=l[0],s=l[1];return r.a.createElement(It,{onClick:function(){i&&i(),s("#ccc"),setTimeout((function(){return s("white")}),100)}},r.a.createElement(Rn,{color:c||"#555",backgroundColor:u}),r.a.createElement(Pt,null,r.a.createElement(At,{style:{padding:t}},n)))},Ht=function(){var e=Object(a.useState)(0),n=Object(fe.a)(e,2),t=n[0],c=n[1],i=function(e){return function(){return c((function(n){return 10*n+e}))}},o=function(e){return function(){console.log("Submitted: ".concat(e*t)),c(0)}};return r.a.createElement(jt,null,r.a.createElement(Sn,{backgroundColor:"rgba(255, 255, 255, 0.8)"}),r.a.createElement(Ct,null,r.a.createElement(xt,{onClick:function(){return c(0)}},r.a.createElement(wt,null,r.a.createElement(kt,null,t||""),r.a.createElement(Hn,{color:"#555",backgroundColor:"white"}))),r.a.createElement(Rt,{onClick:i(7)},"7"),r.a.createElement(Rt,{onClick:i(8)},"8"),r.a.createElement(Rt,{onClick:i(9)},"9"),r.a.createElement(Rt,{onClick:i(4)},"4"),r.a.createElement(Rt,{onClick:i(5)},"5"),r.a.createElement(Rt,{onClick:i(6)},"6"),r.a.createElement(Rt,{onClick:i(1)},"1"),r.a.createElement(Rt,{onClick:i(2)},"2"),r.a.createElement(Rt,{onClick:i(3)},"3"),r.a.createElement(Rt,{onClick:o(-1),padding:"8px 0 0 0",color:"#b13735"},r.a.createElement(Nt.a,{fontSize:"large"})),r.a.createElement(Rt,{onClick:i(0)},"0"),r.a.createElement(Rt,{onClick:o(1),padding:"8px 0 0 0",color:"#08a300"},r.a.createElement(Dt.a,{fontSize:"large"}))))};function St(){var e=Object(te.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: calc(100% - 24px);\n    height: calc(100% - 16px);\n    margin: 8px 12px;\n    touch-action: none;\n"]);return St=function(){return e},e}function Tt(){var e=Object(te.a)(["\n    position: relative;\n    width: 920px;\n    height: 260px;\n    margin-top: 16px;\n"]);return Tt=function(){return e},e}var _t=ae.b.div(Tt()),Bt=ae.b.canvas(St()),Lt=function(){var e=Object(a.useRef)(null),n=Object(a.useRef)(null),t=Object(a.useState)({}),c=Object(fe.a)(t,2),i=c[0],o=c[1];Object(a.useEffect)((function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[]),Object(a.useEffect)((function(){l()}),[e]);var l=function(){var n=e.current;if(n){var t=n.getBoundingClientRect(),a=t.width,r=t.height;o({width:a,height:r})}},u=Object(E.a)({ref:e,onPointerMove:function(t){var a=e.current;if(a){var r=a.getContext("2d");if(r){var c=t.pressure,i=t.buttons,o=t.clientX,l=t.clientY,u=o-a.getBoundingClientRect().x,s=l-a.getBoundingClientRect().y,d=c||1;if(!c||!i)return void(n.current=null);n.current&&(r.beginPath(),r.moveTo(n.current.x,n.current.y),r.lineTo(u,s),r.lineWidth=2*d,r.stroke()),n.current={x:u,y:s}}}},onPointerUp:function(){return n.current=null}},i);return r.a.createElement(_t,null,r.a.createElement(Bt,u),r.a.createElement(Sn,null))};function Mt(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: center;\n"]);return Mt=function(){return e},e}function Vt(){var e=Object(te.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n\n    & > :not(:last-child) {\n        margin-right: 32px;\n    }\n"]);return Vt=function(){return e},e}function zt(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    max-width: 1200px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]);return zt=function(){return e},e}function Ut(){var e=Object(te.a)(["\n    position: absolute;\n    top: 64px;\n    left: 0;\n    width: 100%;\n    height: calc(100% - 64px);\n    display: flex;\n    justify-content: center;\n"]);return Ut=function(){return e},e}function Ft(){var e=Object(te.a)(['\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-image: url("','");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n']);return Ft=function(){return e},e}var Wt=ae.b.div(Ft(),(function(e){return e.backgroundImageSrc})),Zt=ae.b.div(Ut()),Gt=ae.b.div(zt()),Yt=ae.b.div(Vt()),qt=ae.b.div(Mt()),Xt=t(173);function Kt(){var e=Object(te.a)(["\n    border: 1px solid ",";\n    border-radius: 50%;\n    opacity: 0.5;\n    margin-bottom: 10px;\n\n    ","\n"]);return Kt=function(){return e},e}function Jt(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n\n    ","\n\n    & > :not(:last-child) {\n        margin-bottom: 8px;\n    }\n"]);return Jt=function(){return e},e}function $t(){var e=Object(te.a)(["\n    width: 100%;\n    display: flex;\n    justify-content: center;\n\n    ","\n"]);return $t=function(){return e},e}function Qt(){var e=Object(te.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n\n    ","\n"]);return Qt=function(){return e},e}var ea=ae.b.div(Qt(),(function(e){return e.small?"\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: center;\n    ":"\n        justify-content: center;\n        align-items: flex-start;\n    "})),na=ae.b.div($t(),(function(e){return e.small&&"flex-direction: column;"})),ta=ae.b.div(Jt(),(function(e){return e.small?"\n        width: 100%;\n        padding: 16px;\n        box-sizing: border-box;\n    ":"\n        width: 40%;\n        max-width: 600px;\n        margin: 16px;\n    "})),aa=ae.b.div(Kt(),(function(e){return e.color}),(function(e){return e.small?"\n        height: 0;\n        margin: 16px;\n    ":"\n        width: 0;\n        margin-top: 56px;\n\n        ".concat(e.marginTopOverride?"margin-top: ".concat(e.marginTopOverride,"px;"):"","\n        ").concat(e.marginBottomOverride?"margin-bottom: ".concat(e.marginBottomOverride,"px;"):"","\n    ")})),ra=function(e){var n=e.titles,t=e.children,a=e.marginBottomOverride,c=e.marginTopOverride,i=Object(nt.a)(),o=Object(Xt.a)(i.breakpoints.down("sm"));return r.a.createElement(ea,{small:o},r.a.createElement(na,{small:o},r.a.createElement(ta,{small:o},r.a.createElement(Ee.a,{variant:"h5"},n[0]),r.a.cloneElement(t[0],{small:o})),t.slice(1).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.key||t},r.a.createElement(aa,{color:i.palette.secondary.main,small:o,marginTopOverride:c,marginBottomOverride:a}),r.a.createElement(ta,{small:o},r.a.createElement(Ee.a,{variant:"h5"},n[t+1]),r.a.cloneElement(e,{small:o})))}))))},ca=t(189),ia=t(140),oa=t(175);function la(){var e=Object(te.a)(["\n    flex-grow: 1;\n"]);return la=function(){return e},e}function ua(){var e=Object(te.a)(["\n    && {\n        padding: 0 12px;\n        min-height: 56px;\n        height: 56px;\n    }\n\n    & > :not(:last-child) {\n        margin-right: 16px;\n    }\n"]);return ua=function(){return e},e}var sa=Object(ae.b)(De.a)(ua()),da=ae.b.div(la()),ma=Object(u.b)(null,{updateCharacterMaxHp:function(e,n){return{type:"CHARACTER_MAX_HP_UPDATED",payload:{id:e,maxHp:n}}},deleteCharacter:function(e){return{type:"CHARACTER_DELETED",payload:{id:e}}}})((function(e){var n=e.character,t=e.updateCharacterMaxHp,c=e.deleteCharacter,i=Object(a.useState)(n.maxHitPoints.toString()),o=Object(fe.a)(i,2),l=o[0],u=o[1],s=Object(a.useState)(!1),d=Object(fe.a)(s,2),m=d[0],f=d[1],b=function(){return f(!1)},h=n.name,p=n.avatarUrl;return r.a.createElement(ia.a,{elevation:3,style:{width:"100%",height:"56px"}},r.a.createElement(sa,null,r.a.createElement(Tn.a,{variant:"rounded",src:p}),r.a.createElement(Ee.a,{variant:"h6"},h),r.a.createElement(da,null),r.a.createElement(ca.a,{label:"Max HP",type:"number",value:l,onChange:function(e){var a=n.id,r=e.target.value;u(r),t(a,parseInt(r)||0)},style:{width:"64px"}}),r.a.createElement(be.a,{onClick:function(){return f(!0)}},r.a.createElement(oa.a,null))),r.a.createElement(ve.a,{open:m,onClose:b},r.a.createElement(ge.a,null,"Are you sure you want to delete ",h,"?"),r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,"This will remove them from your list of saved characters. You will only be able to undo this by adding this character again.")),r.a.createElement(ye.a,null,r.a.createElement(je.a,{onClick:b,color:"secondary"},"Cancel"),r.a.createElement(je.a,{onClick:function(){var e=n.id;c(e),b()},color:"primary",variant:"contained"},"Delete"))))})),fa=Object(u.b)((function(e){return{characters:e&&e.characters||[]}}),{addCharacterByUrl:A})((function(e){e.small;var n=e.characters,t=e.addCharacterByUrl,c=Object(a.useState)(!1),i=Object(fe.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(""),s=Object(fe.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(""),b=Object(fe.a)(f,2),h=b[0],p=b[1],v=function(){return l(!1)};return r.a.createElement(r.a.Fragment,null,n.length>0?n.map((function(e){return r.a.createElement(ma,{key:e.id,character:e})})):r.a.createElement(Ee.a,{variant:"body1"},"Currently you don't have any saved characters."),r.a.createElement(je.a,{variant:"outlined",color:"primary",onClick:function(){return l(!0)}},"Add character"),r.a.createElement(ve.a,{open:o,onClose:v},r.a.createElement(ge.a,null,"Import new character from D&D Beyond"),r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,'Paste a link to the character you want to add in the input field below. Make sure the character privacy is set to "Public", otherwise it will not be imported.',r.a.createElement("br",null)," ",r.a.createElement("br",null),"Optionally, specify character's maximum hit points. You will be able to change them later."),r.a.createElement(ca.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"Character URL",value:d,onChange:function(e){return m(e.target.value)}}),r.a.createElement(ca.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:h,onChange:function(e){return p(e.target.value)}})),r.a.createElement(ye.a,null,r.a.createElement(je.a,{onClick:v,color:"secondary"},"Cancel"),r.a.createElement(je.a,{onClick:function(){v(),t(d,parseInt(h)||0),m(""),p("")},color:"primary",variant:"contained",disabled:!d},"Import"))))}));function ba(){var e=Object(te.a)(["\n    flex-grow: 1;\n"]);return ba=function(){return e},e}function ha(){var e=Object(te.a)(["\n    && {\n        padding: 0 12px;\n        min-height: 56px;\n        height: 56px;\n    }\n\n    & > :first-child {\n        margin-right: 16px;\n    }\n"]);return ha=function(){return e},e}var pa=Object(ae.b)(De.a)(ha()),va=ae.b.div(ba()),Ea=Object(u.b)(null,{updateNPCSafe:function(e){return function(n,t){var a=t().npcs;a&&a.find((function(n){return n.name===e.updatedNPC.name}))?n(P(r.a.createElement(r.a.Fragment,null,"NPC with this name already exists."))):n(L(e))}},deleteNPC:function(e){return{type:"NPC_DELETED",payload:e}}})((function(e){var n=e.npc,t=e.updateNPCSafe,c=e.deleteNPC,i=n.name,o=n.avatarUrl,l=n.maxHitPoints,u=Object(a.useState)(!1),s=Object(fe.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(!1),b=Object(fe.a)(f,2),h=b[0],p=b[1],v=Object(a.useState)(i),E=Object(fe.a)(v,2),g=E[0],O=E[1],y=Object(a.useState)(l.toString()),j=Object(fe.a)(y,2),C=j[0],x=j[1],w=Object(a.useState)(o||""),k=Object(fe.a)(w,2),I=k[0],P=k[1],A=function(){return m(!1)},N=function(){return p(!1)};return r.a.createElement(ia.a,{elevation:3,style:{width:"100%",height:"56px"}},r.a.createElement(pa,null,r.a.createElement(Tn.a,{variant:"rounded",src:o}),r.a.createElement(Ee.a,{variant:"h6"},i),r.a.createElement(va,null),r.a.createElement(be.a,{onClick:function(){return m(!0)}},r.a.createElement(ke.a,null)),r.a.createElement(be.a,{onClick:function(){return p(!0)}},r.a.createElement(oa.a,null))),r.a.createElement(ve.a,{open:d,onClose:A},r.a.createElement(ge.a,null,"Edit ",i),r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,"Change name, max hit points or avatar url of your NPC."),r.a.createElement(ca.a,{fullWidth:!0,margin:"dense",label:"NPC Name",value:g,onChange:function(e){return O(e.target.value)}}),r.a.createElement(ca.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:C,onChange:function(e){return x(e.target.value)}}),r.a.createElement(ca.a,{fullWidth:!0,margin:"dense",label:"Avatar URL",value:I,onChange:function(e){return P(e.target.value)}})),r.a.createElement(ye.a,null,r.a.createElement(je.a,{onClick:A,color:"secondary"},"Cancel"),r.a.createElement(je.a,{onClick:function(){var e=parseInt(C)||0;t({originalNPC:n,updatedNPC:{name:g,avatarUrl:I,maxHitPoints:e}}),A()},color:"primary",variant:"contained"},"Save"))),r.a.createElement(ve.a,{open:h,onClose:N},r.a.createElement(ge.a,null,"Are you sure you want to delete ",i,"?"),r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,"This will remove them from your list of saved NPCs. You will only be able to undo this by creating this NPC again.")),r.a.createElement(ye.a,null,r.a.createElement(je.a,{onClick:N,color:"secondary"},"Cancel"),r.a.createElement(je.a,{onClick:function(){N(),c(n)},color:"primary",variant:"contained"},"Delete"))))})),ga=Object(u.b)((function(e){return{npcs:e&&e.npcs||[]}}),{addNPCSafe:function(e){return function(n,t){var a=t().npcs;a&&a.find((function(n){return n.name===e.name}))?n(P(r.a.createElement(r.a.Fragment,null,"NPC with this name already exists."))):n(B(e))}}})((function(e){e.small;var n=e.npcs,t=e.addNPCSafe,c=Object(a.useState)(!1),i=Object(fe.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(""),s=Object(fe.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(""),b=Object(fe.a)(f,2),h=b[0],p=b[1],v=Object(a.useState)(""),E=Object(fe.a)(v,2),g=E[0],O=E[1],y=function(){return l(!1)};return r.a.createElement(r.a.Fragment,null,n.length>0?n.map((function(e){return r.a.createElement(Ea,{key:e.name,npc:e})})):r.a.createElement(Ee.a,{variant:"body1"},"Currently you don't have any saved NPCs."),r.a.createElement(je.a,{variant:"outlined",color:"primary",onClick:function(){return l(!0)}},"Add NPC"),r.a.createElement(ve.a,{open:o,onClose:y},r.a.createElement(ge.a,null,"Create new NPC"),r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null,"Choose a name for your NPC and specify maximum hit points. Optionally, specify an avatar url or pick one of the default avatars.",r.a.createElement("br",null)," ",r.a.createElement("br",null),"It is not possible to have several NPCs with the same name."),r.a.createElement(ca.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"NPC Name",value:d,onChange:function(e){return m(e.target.value)}}),r.a.createElement(ca.a,{fullWidth:!0,type:"number",margin:"dense",label:"Max Hit Points",value:h,onChange:function(e){return p(e.target.value)}}),r.a.createElement(ca.a,{fullWidth:!0,margin:"dense",label:"Avatar URL",value:g,onChange:function(e){return O(e.target.value)}})),r.a.createElement(ye.a,null,r.a.createElement(je.a,{onClick:y,color:"secondary"},"Cancel"),r.a.createElement(je.a,{onClick:function(){var e=parseInt(h)||0;t({name:d,maxHitPoints:e,avatarUrl:g}),y(),m(""),p(""),O("")},color:"primary",variant:"contained",disabled:!d||!h},"Create"))))})),Oa=t(191);function ya(){var e=Object(te.a)(["\n    && {\n        padding: 0 6px;\n        min-height: 56px;\n        height: 56px;\n    }\n"]);return ya=function(){return e},e}var ja=Object(ae.b)(De.a)(ya()),Ca=Object(u.b)((function(e){return{encounter:e&&e.encounter||null}}),{addCharacterToEncounter:function(e){return{type:"ENC_CHARACTER_ADDED",payload:e}},removeCharacterFromEncounter:function(e){return{type:"ENC_CHARACTER_REMOVED",payload:e}},updateCharacterInitiative:function(e,n){return{type:"ENC_CHARACTER_INITIATIVE_UPDATED",payload:{character:e,initiative:n}}}})((function(e){var n=e.character,t=e.encounter,c=e.addCharacterToEncounter,i=e.removeCharacterFromEncounter,o=e.updateCharacterInitiative,l=Object(a.useState)(""),u=Object(fe.a)(l,2),s=u[0],d=u[1],m=Object(a.useMemo)((function(){return!!t&&Object.keys(t.characters).some((function(e){return t.characters[parseInt(e)].name===n.name}))}),[n,t]);Object(a.useEffect)((function(){m||d("")}),[m]),Object(a.useEffect)((function(){if(t){var e=Object(W.keys)(t.characters).find((function(e){return t.characters[parseInt(e)].name===n.name}));if(void 0===e||NaN===parseInt(e))return;var a=t.initiativeById[parseInt(e)];void 0!==a&&d(a.toString())}}),[]);console.log(t);var f={disabled:!m,label:m?"Initiative":"",type:"number",value:s,onChange:function(e){var t=e.target.value;d(t);var a=parseInt(t);a&&o(n,a)},style:{width:"64px"}};return r.a.createElement(ia.a,{elevation:3,style:{width:"100%",height:"56px"}},r.a.createElement(ja,null,r.a.createElement(Oa.a,{disabled:!t,checked:m,color:"primary",onClick:function(){if(m)i(n),d("");else{c(n);var e=parseInt(s);e&&o(n,e)}}}),r.a.createElement(Ee.a,{variant:"h6"},n.name),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(ca.a,f)))})),xa=Object(u.b)((function(e){return{characters:e&&e.characters||[]}}))((function(e){var n=e.characters;return r.a.createElement(r.a.Fragment,null,n.length>0?n.map((function(e){return r.a.createElement(Ca,{key:e.id,character:e})})):r.a.createElement(Ee.a,{variant:"body1"},"Currently you don't have any saved characters."))})),wa=t(182),ka=t(183);function Ia(){var e=Object(te.a)(["\n    width: 18px;\n    height: 18px;\n    margin: 12px;\n    border-radius: 2px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n\n    color: white;\n    background-color: white;\n    cursor: pointer;\n    user-select: none;\n\n    transition: background-color 300ms, border-color 300ms;\n\n    ","\n"]);return Ia=function(){return e},e}function Pa(){var e=Object(te.a)(["\n    && {\n        padding: 0 6px;\n        min-height: 56px;\n        height: 56px;\n    }\n"]);return Pa=function(){return e},e}var Aa=Object(ae.b)(De.a)(Pa()),Na=ae.b.div(Ia(),(function(e){return e.children?"\n        background-color: ".concat(e.palette.primary.main,";\n        border: 2px solid rgba(0, 0, 0, ").concat(e.palette.primary.main,");\n    "):"\n        border: 2px solid rgba(0, 0, 0, 0.54);\n    "})),Da=Object(u.b)((function(e){return{encounter:e&&e.encounter||null}}),{addNPCToEncounter:function(e){return{type:"ENC_NPC_ADDED",payload:e}},removeNPCFromEncounter:function(e){return{type:"ENC_NPC_REMOVED",payload:e}},updateNPCInitiative:function(e,n){return{type:"ENC_NPC_INITIATIVE_UPDATED",payload:{npc:e,initiative:n}}}})((function(e){var n=e.npc,t=e.encounter,c=e.addNPCToEncounter,i=e.removeNPCFromEncounter,o=e.updateNPCInitiative,l=Object(nt.a)(),u=Object(a.useState)(""),s=Object(fe.a)(u,2),d=s[0],m=s[1],f=Object(a.useMemo)((function(){if(!t)return null;var e=Object(W.reduce)((function(e,t){return e+(t.name.startsWith(n.name)?1:0)}),0,t.npcs);return 0===e?null:e}),[n,t]);Object(a.useEffect)((function(){f||m("")}),[f]),Object(a.useEffect)((function(){if(t){var e=Object(W.keys)(t.npcs).find((function(e){return t.npcs[parseInt(e)].name===n.name}));if(void 0===e||NaN===parseInt(e))return;var a=t.initiativeById[parseInt(e)];void 0!==a&&m(a.toString())}}),[]);var b=function(){c(n);var e=parseInt(d);NaN!==e&&o(n,e)},h={disabled:!f,label:f?"Initiative":"",type:"number",value:d,onChange:function(e){var t=e.target.value;m(t);var a=parseInt(t);NaN!==a&&o(n,a)},style:{width:"64px"}};return r.a.createElement(ia.a,{elevation:3,style:{width:"100%",height:"56px"}},r.a.createElement(Aa,null,r.a.createElement(Na,{palette:l.palette,onClick:b},f),r.a.createElement(Ee.a,{variant:"h6"},n.name),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(ca.a,h),r.a.createElement(be.a,{size:"small",onClick:function(){return i(n)},disabled:!f},r.a.createElement(wa.a,null)),r.a.createElement(be.a,{size:"small",onClick:b},r.a.createElement(ka.a,null))))})),Ra=Object(u.b)((function(e){return{npcs:e&&e.npcs||[]}}))((function(e){var n=e.npcs;return r.a.createElement(r.a.Fragment,null,n.length>0?n.map((function(e){return r.a.createElement(Da,{key:e.name,npc:e})})):r.a.createElement(Ee.a,{variant:"body1"},"Currently you don't have any saved NPCs."))})),Ha=Object(u.b)((function(e){return{currentBackgroundUrl:e.characters&&e.characters[1]&&e.characters[1].defaultBackdrop.largeBackdropAvatarUrl,isErrorDialogOpen:e.ui&&e.ui.errorDialog.isOpen||!1,errorMessage:e.ui&&e.ui.errorDialog.message,encounter:e.encounter||null}}),{closeErrorDialog:function(){return{type:"ERROR_DIALOG_CLOSED"}},resetEncounter:function(){return{type:"ENC_RESET"}}})((function(e){var n=e.currentBackgroundUrl,t=e.isErrorDialogOpen,c=e.errorMessage,i=e.encounter,o=e.closeErrorDialog,l=e.resetEncounter,u=Object(a.useState)(null),s=Object(fe.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(!1),b=Object(fe.a)(f,2),h=b[0],p=b[1],v=Object(a.useState)(!0),E=Object(fe.a)(v,2),g=E[0],O=E[1],y=Object(a.useState)(!1),j=Object(fe.a)(y,2),C=j[0],x=j[1],w=Object(a.useMemo)((function(){if(!i)return!1;var e=i.characters,n=i.npcs,t=i.initiativeById,a=Object.keys(e).every((function(e){return Object.keys(t).some((function(n){return e===n}))})),r=Object.keys(n).every((function(e){return Object.keys(t).some((function(n){return e===n}))}));return a&&r&&Object.keys(t).length>0}),[i]),k=function(){return m(null)},I=function(){return p(!0)},P=function(){return p(!1)},A=function(){return O(!1)};return r.a.createElement(Wt,{backgroundImageSrc:n},r.a.createElement(Se,null,r.a.createElement(Be,{title:"View and edit saved characters"},r.a.createElement(be.a,{color:"inherit",onClick:I},r.a.createElement(xe.a,null))),r.a.createElement("div",{style:{flex:"1"}}),r.a.createElement(be.a,{color:"inherit",onClick:function(e){return m(e.currentTarget)}},r.a.createElement(we.a,null))),r.a.createElement(he.a,{anchorEl:d,open:!!d,onClose:k},r.a.createElement(pe.a,{onClick:function(){I(),k()}},r.a.createElement(xe.a,{color:"secondary",style:{marginRight:"16px"}})," Saved characters"),r.a.createElement(pe.a,{onClick:function(){i&&0===i.currentId?x(!0):x(!1),O(!0),k()}},r.a.createElement(ke.a,{color:"secondary",style:{marginRight:"16px"}})," ",i&&0===i.currentId?"Create new encounter":"Edit current encounter"),r.a.createElement(pe.a,{onClick:function(){l(),k()},disabled:!!i&&0===i.currentId},r.a.createElement(Ie.a,{color:"secondary",style:{marginRight:"16px"}})," Clear current encounter")),r.a.createElement(Zt,null,r.a.createElement(Gt,null,r.a.createElement(Yt,null,r.a.createElement(ft,null),r.a.createElement(Ht,null)),r.a.createElement(qt,null,r.a.createElement(Lt,null)))),r.a.createElement(ve.a,{fullScreen:!0,open:h,onClose:P},r.a.createElement(Se,{color:"primary"},r.a.createElement(be.a,{color:"inherit",onClick:P},r.a.createElement(Pe.a,null)),r.a.createElement(Ee.a,{variant:"h6",style:{marginLeft:"8px"}},"Saved Characters")),r.a.createElement(ra,{titles:["Characters","NPCs"],marginBottomOverride:"60"},r.a.createElement(fa,null),r.a.createElement(ga,null))),r.a.createElement(ve.a,{maxWidth:"lg",fullWidth:!0,open:g},r.a.createElement(ge.a,null,"New Encounter"),r.a.createElement(Oe.a,null,r.a.createElement(ra,{titles:["Characters","NPCs"]},r.a.createElement(xa,null),r.a.createElement(Ra,null))),r.a.createElement(ye.a,null,r.a.createElement(je.a,{color:"secondary",onClick:function(){A(),C&&(l(),x(!1))}},"Cancel"),r.a.createElement(je.a,{disabled:!w,variant:"contained",color:"primary",onClick:A},"OK"))),r.a.createElement(ve.a,{open:t,onClose:o},r.a.createElement(ge.a,null,"Error"),r.a.createElement(Oe.a,null,c?r.a.createElement(Ce.a,null,c):null),r.a.createElement(ye.a,null,r.a.createElement(je.a,{variant:"contained",color:"primary",onClick:o},"OK"))))})),Sa=Object(o.a)({palette:{primary:{main:"#b13735"},secondary:{main:"#555"}},typography:{fontFamily:"Cairo"},breakpoints:{values:{xs:0,sm:500,md:960,lg:1280,xl:1920}}}),Ta=function(){return r.a.createElement(l.a,{theme:Sa},r.a.createElement(u.a,{store:ee},r.a.createElement(s.PersistGate,{loading:r.a.createElement(me,null),persistor:ne},r.a.createElement(Ha,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ta,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.e655ef1e.chunk.js.map